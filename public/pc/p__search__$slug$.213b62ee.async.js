(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{UhD9:function(e,t,a){"use strict";a.r(t);a("IzEo");var s=a("bx4M"),i=a("p0pE"),n=a.n(i),r=a("fFZ8"),c=a.n(r),o=(a("5NDa"),a("5rEg")),m=(a("Znn+"),a("ZTPi")),l=a("mrSG"),h=a("q1tI"),p=a.n(h),u=a("MuoO"),y=a("vOnD"),d=a("LLXN"),g=a("mNhR"),E=a("mOtZ"),b=a("WqWh"),v=a("faBS"),f=a("/88p"),Q=a("gmfD"),q=a("3a4m"),C=a.n(q);function D(){var e=c()(["\n  padding: 60px;\n\n  .search {\n    width: 600px;\n    margin: 40px auto;\n  }\n"]);return D=function(){return e},e}var O=m["a"].TabPane,S=o["a"].Search,L=y["a"].div(D()),k=class extends h["Component"]{constructor(e){super(e),this.initData=(()=>{var e=this.state.slug,t=this.props.dispatch;e&&(t({type:"post/queryList",payload:{query:{title:e},addon:{type:"search"}}}),t({type:"animate/queryList",payload:{query:{title:e},addon:{type:"search"}}}),t({type:"comic/queryList",payload:{query:{title:e},addon:{type:"search"}}}))}),this.searchChange=((e,t)=>{var a=this.props.dispatch,s=Object(v["b"])({query:e}),i=this.state.slug;a({type:"".concat(t,"/queryList"),payload:{query:n()({},s,{title:i}),addon:{type:"search"}}})}),this.listQuery={animate:e=>{var t=this.state.animateQuery,a=n()({},t,e);this.setState({animateQuery:a}),this.searchChange(a,"animate")},comic:e=>{var t=this.state.comicQuery,a=n()({},t,e);this.setState({comicQuery:a}),this.searchChange(a,"comic")},post:e=>{var t=this.state.postQuery,a=n()({},t,e);this.setState({query:a}),this.searchChange(a,"post")}},this.searchSubmit=(e=>{C.a.replace({pathname:"/search/".concat(e)})}),this.state={slug:e.match.params.slug,animateQuery:{key:"time",sort:!1,list:!1,size:20,page:1},comicQuery:{key:"time",sort:!1,list:!1,size:20,page:1},postQuery:{key:"time",sort:!1,list:!1,size:20,page:1}}}static getDerivedStateFromProps(e,t){return e.match.params.slug!==t.slug?{slug:e.match.params.slug}:null}componentDidMount(){this.initData()}componentDidUpdate(e,t){t.slug!==this.state.slug&&this.initData()}render(){var e=this.props,t=e.post,a=e.post.search,i=e.comic,r=e.comic.search,c=e.animate,o=e.animate.search,l=e.loadingPost,h=e.loadingComic,u=e.loadingAnimate,y=this.state,v=y.animateQuery,q=y.comicQuery,C=y.postQuery,D={animate:c.total.search||0,comic:i.total.search||0,post:t.total.search||0};return p.a.createElement(L,null,p.a.createElement("div",{className:"container"},p.a.createElement(s["a"],{bordered:!1},p.a.createElement("div",{className:"search"},p.a.createElement(S,{placeholder:Object(d["formatMessage"])({id:"common.input.tips"}),size:"large",onSearch:this.searchSubmit,enterButton:p.a.createElement(p.a.Fragment,null,p.a.createElement(g["a"],{type:"icon-sousuo"}),p.a.createElement("span",null,Object(d["formatMessage"])({id:"common.search"})))})),p.a.createElement(m["a"],{defaultActiveKey:"1",onChange:()=>{}},p.a.createElement(O,{tab:Object(d["formatMessage"])({id:"common.animate"}),key:"1"},p.a.createElement(s["a"],{bordered:!1,style:{marginBottom:"20px"},loading:u},p.a.createElement(E["a"],{value:v,onChange:this.listQuery.animate}),v.list?p.a.createElement(f["b"],{type:"animate",list:o}):p.a.createElement(f["a"],{type:"animate",list:o}),p.a.createElement(b["a"],{value:n()({},v,{total:D.animate}),onChange:this.listQuery.animate}))),p.a.createElement(O,{tab:Object(d["formatMessage"])({id:"common.comic"}),key:"2"},p.a.createElement(s["a"],{bordered:!1,style:{marginBottom:"20px"},loading:h},p.a.createElement(E["a"],{value:q,onChange:this.listQuery.comic}),q.list?p.a.createElement(f["b"],{type:"comic",list:r}):p.a.createElement(f["a"],{type:"comic",list:r}),p.a.createElement(b["a"],{value:n()({},q,{total:D.comic}),onChange:this.listQuery.comic}))),p.a.createElement(O,{tab:Object(d["formatMessage"])({id:"common.post"}),key:"3"},p.a.createElement(s["a"],{bordered:!1,style:{marginBottom:"20px"},loading:l},p.a.createElement(Q["b"],{list:a}),p.a.createElement(b["a"],{value:n()({},C,{total:D.post}),onChange:this.listQuery.post})))))))}};k=l["a"]([Object(u["connect"])(e=>{var t=e.animate,a=e.comic,s=e.post,i=e.loading;return{post:s,animate:t,comic:a,loadingPost:i.effects["post/queryList"],loadingAnimate:i.effects["animate/queryList"],loadingComic:i.effects["comic/queryList"]}})],k),t["default"]=k}}]);