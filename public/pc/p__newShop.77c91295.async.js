(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"OB+6":function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("miYZ"),a("tsqr")),s=(a("2qtc"),a("kLXV")),l=a("mrSG"),i=a("q1tI"),o=a.n(i),c=a("MuoO"),m=a("L6Kr"),p=(a("+L6B"),a("2/Rp")),d=(a("R9oj"),a("ECub")),u=a("fFZ8"),h=a.n(u),g=a("vOnD"),b=a("XEok"),f=a("LLXN"),y=a("l61h");function E(){var e=h()(["\n  display: grid;\n  grid-gap: 20px;\n  grid-template-columns: 1fr;\n\n  .list {\n    min-height: 160px;\n    border: solid 1px #d8e1f0;\n    border-radius: 5px;\n    box-shadow: 0 2px 4px #dddddd;\n    padding: 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr 2fr 1fr;\n\n    .cover {\n      width: 100%;\n      height: 100%;\n      background-size: cover;\n    }\n\n    .left,\n    .right {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n    }\n\n    .lm {\n      .label {\n        margin: 0 10px;\n        font-weight: bold;\n        color: ",";\n        font-size: 1.2em;\n      }\n    }\n  }\n\n  h2 {\n    color: ",";\n  }\n"]);return E=function(){return e},e}var v=g["a"].div(E(),e=>e.color,e=>e.color),x=e=>{var t=e.list,a=e.submit,n=Object(i["useContext"])(b["a"]),r=Object(i["useMemo"])(()=>n,[n]);return o.a.createElement(o.a.Fragment,null,0===t.length?o.a.createElement(d["a"],{style:{margin:"15px 0 "}}):o.a.createElement(v,{color:r},t.map((e,t)=>o.a.createElement("div",{className:"list"},o.a.createElement("div",{className:"cover",style:{backgroundImage:"url(".concat(e.cover,")")}}),o.a.createElement("div",{className:"left"},o.a.createElement("h2",null,e.title),o.a.createElement("div",null,o.a.createElement("span",null,Object(f["formatMessage"])({id:"shop.price"}),":"),o.a.createElement("span",{className:"label"},e.price),o.a.createElement("span",null,Object(f["formatMessage"])({id:"shop.rmb"})))),o.a.createElement("div",{className:"rm"},o.a.createElement("h3",null,Object(f["formatMessage"])({id:"shop.introduce"})),o.a.createElement("p",null,e.introduce)),o.a.createElement("div",{className:"right"},o.a.createElement(y["a"],null,o.a.createElement(p["a"],{type:"primary",size:"large",style:{width:"160px"},onClick:()=>{a(e._id)}},Object(f["formatMessage"])({id:"shop.buy"}))))))))},O=x,j=a("Dp36"),w=a("3a4m"),M=a.n(w),q=class extends i["Component"]{constructor(){super(...arguments),this.state={cate:"newShop",query:{size:1e4,page:1}},this.initData=(()=>{var e=this.state.query,t=this.props.dispatch;t({type:"shop/queryList",payload:{query:e}})}),this.buy=(e=>{s["a"].confirm({title:Object(f["formatMessage"])({id:"shop.tips"}),content:Object(f["formatMessage"])({id:"shop.tips.text"}),onOk(){return j["a"].order({data:{shop:e}}).then(e=>{e&&(r["a"].success(Object(f["formatMessage"])({id:"shop.buy.success"})),M.a.push("/user"))})},onCancel(){}})})}componentDidMount(){this.initData()}render(){var e=this.state,t=e.cate,a=(e.query,this.props),r=a.shop.list,s=a.loading,l=a.category,i=l[t];return o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement(m["a"],{img:i.cover,span:i.slug}),o.a.createElement(n["a"],{bordered:!1,style:{marginBottom:"20px"},loading:s},o.a.createElement(O,{list:r,submit:this.buy}))))}};q=l["a"]([Object(c["connect"])(e=>{var t=e.shop,a=e.category,n=e.loading;return{shop:t.shop,category:a,loading:n.effects["shop/queryList"]}})],q);t["default"]=q}}]);