(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{i1J9:function(e,t,a){"use strict";a.r(t);a("+BJd");var s=a("mr32"),r=(a("T2oS"),a("W9HT")),i=(a("Znn+"),a("ZTPi")),n=a("mrSG"),l=a("q1tI"),o=a.n(l),c=a("MuoO"),m=a("usdK"),d=a("wd/R"),u=a.n(d),g=a("LLXN"),p=a("vOnD"),b=a("/88p"),h=a("gmfD"),f=(a("g9YV"),a("wCAj")),E=(a("IzEo"),a("bx4M")),j=(a("Telt"),a("Tckk"));class y extends l["Component"]{componentDidMount(){}render(){var e=this.props.data,t=[{title:Object(g["formatMessage"])({id:"user.content"}),dataIndex:"content"},{title:Object(g["formatMessage"])({id:"user.image"}),dataIndex:"image",render:e=>e.map(e=>o.a.createElement(j["a"],{src:e,shape:"square"}))},{title:Object(g["formatMessage"])({id:"user.updatedAt"}),dataIndex:"updatedAt",render:e=>u()(e).format("YYYY-MM-DD HH:mm:ss")}],a={showSizeChanger:!0,showQuickJumper:!0,total:e.length,showTotal:e=>`${Object(g["formatMessage"])({id:"common.all.total"})} ${e} ${Object(g["formatMessage"])({id:"common.all.item"})}`};return o.a.createElement(E["a"],{className:"tableList",bordered:!1},o.a.createElement(f["a"],{rowKey:"slug",columns:t,dataSource:e,pagination:a}))}}var M=y;class O extends l["Component"]{componentDidMount(){}render(){var e=this.props.data,t=[{title:Object(g["formatMessage"])({id:"user.order.number"}),dataIndex:"_id"},{title:Object(g["formatMessage"])({id:"user.order.createdAt"}),dataIndex:"createdAt",render:e=>u()(e).format("YYYY-MM-DD HH:mm:ss")}],a={showSizeChanger:!0,showQuickJumper:!0,total:e.length,showTotal:e=>`${Object(g["formatMessage"])({id:"common.all.total"})} ${e} ${Object(g["formatMessage"])({id:"common.all.item"})}`};return o.a.createElement(E["a"],{className:"tableList",bordered:!1},o.a.createElement(f["a"],{rowKey:"slug",columns:t,dataSource:e,pagination:a}))}}var v=O,x=(a("Awhp"),a("KrTs"));class k extends l["Component"]{componentDidMount(){}render(){var e=this.props.data,t={draft:{text:Object(g["formatMessage"])({id:"user.own.status.draft"}),badge:"processing",value:"draft"},publish:{text:Object(g["formatMessage"])({id:"user.own.status.publish"}),badge:"success",value:"publish"},reject:{text:Object(g["formatMessage"])({id:"user.own.status.reject"}),badge:"error",value:"reject"}},a={animate:Object(g["formatMessage"])({id:"user.animate"}),post:Object(g["formatMessage"])({id:"user.post"}),comment:Object(g["formatMessage"])({id:"user.comment"}),others:Object(g["formatMessage"])({id:"user.others"})},s=[{title:Object(g["formatMessage"])({id:"user.content"}),dataIndex:"content"},{title:Object(g["formatMessage"])({id:"user.image"}),dataIndex:"image",render:e=>e.map(e=>o.a.createElement(j["a"],{src:e,shape:"square"}))},{title:Object(g["formatMessage"])({id:"user.type"}),dataIndex:"type",render:e=>a[e]},{title:Object(g["formatMessage"])({id:"user.status"}),dataIndex:"status",render(e){return o.a.createElement(x["a"],{status:t[e].badge,text:t[e].text})}},{title:Object(g["formatMessage"])({id:"user.updatedAt"}),dataIndex:"updatedAt",render:e=>u()(e).format("YYYY-MM-DD HH:mm:ss")}],r={showSizeChanger:!0,showQuickJumper:!0,total:e.length,showTotal:e=>`${Object(g["formatMessage"])({id:"common.all.total"})} ${e} ${Object(g["formatMessage"])({id:"common.all.item"})}`};return o.a.createElement(E["a"],{className:"tableList",bordered:!1},o.a.createElement(f["a"],{rowKey:"slug",columns:s,dataSource:e,pagination:r}))}}var w=k,S=(a("+L6B"),a("2/Rp")),C=(a("jCWc"),a("kPKH")),D=(a("14J3"),a("BMrR")),I=(a("y8nQ"),a("Vl3Y")),Y=(a("5NDa"),a("5rEg")),N=(a("miYZ"),a("tsqr")),T=(a("DZo9"),a("8z0m")),$=(a("Pwec"),a("CtXQ")),A=a("EQW2");class L extends l["Component"]{constructor(){super(...arguments),this.state={loading:!1},this.handleChange=(e=>{var t=this.props.onChange;if("uploading"===e.file.status)this.setState({loading:!0});else if("done"===e.file.status){var a=e.file.response.data[0].path;this.setState({loading:!1}),t(a)}else"error"===e.file.status&&(N["a"].error("upload error"),this.setState({loading:!1}))})}render(){var e=this.state.loading,t=o.a.createElement("div",null,o.a.createElement($["a"],{type:e?"loading":"plus"}),o.a.createElement("div",null,"Upload")),a=this.props,s=a.type,r=void 0===s?"others":s,i=a.value,n=a.width,l=void 0===n?128:n,c=a.height,m=void 0===c?128:c;return o.a.createElement(T["a"],Object.assign({name:"file",style:{width:`${l}px`,height:`${m}px`},listType:"picture-card",showUploadList:!1,onChange:this.handleChange,data:{type:r}},A["a"]),i?o.a.createElement("img",{src:i,alt:"avatar",style:{maxHeight:"100%",maxWidth:"100%"}}):t)}}var H=L,J=a("Dp36");class K extends l["Component"]{constructor(){super(...arguments),this.state={loading:!1},this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.submit,s=t.info;this.props.form.validateFields((e,t)=>{e?N["a"].destroy():(this.setState({loading:!0}),J["a"].putUserInfo({params:{slug:s.name},data:t}).then(e=>{e&&(N["a"].success(Object(g["formatMessage"])({id:"common.submit.success"})),a())}).finally(()=>{this.setState({loading:!1})}))})})}componentDidMount(){}render(){var e=this.state.loading,t=this.props.info,a=this.props.form.getFieldDecorator,s=Y["a"].TextArea,r={labelCol:{span:4},wrapperCol:{span:18,offset:1}},i={labelCol:{span:4},wrapperCol:{span:18,offset:5}},n={xs:24,sm:24,md:24,lg:24,xl:12};return o.a.createElement(I["a"],{onSubmit:this.handleSubmit},o.a.createElement(D["a"],{type:"flex",justify:"space-between",align:"top"},o.a.createElement(C["a"],Object.assign({},n),o.a.createElement(I["a"].Item,Object.assign({},r,{label:Object(g["formatMessage"])({id:"user.name"})}),o.a.createElement(Y["a"],{placeholder:Object(g["formatMessage"])({id:"user.tips.fill.name"}),disabled:!0,value:t.name})),o.a.createElement(I["a"].Item,Object.assign({},r,{label:Object(g["formatMessage"])({id:"user.email"})}),a("email",{initialValue:t.email,rules:[{required:!0,message:Object(g["formatMessage"])({id:"user.tips.fill.email"})}]})(o.a.createElement(Y["a"],{placeholder:Object(g["formatMessage"])({id:"user.tips.fill.email"})}))),o.a.createElement(I["a"].Item,Object.assign({},r,{label:Object(g["formatMessage"])({id:"user.introduce"})}),a("introduce",{initialValue:t.introduce})(o.a.createElement(s,{placeholder:Object(g["formatMessage"])({id:"user.tips.fill.introduce"}),autosize:{minRows:6,maxRows:8}})))),o.a.createElement(C["a"],Object.assign({},n),o.a.createElement(I["a"].Item,Object.assign({},r,{label:Object(g["formatMessage"])({id:"user.avatar"})}),a("avatar",{initialValue:t.avatar})(o.a.createElement(H,{width:110,height:110}))),o.a.createElement(I["a"].Item,Object.assign({},r,{label:Object(g["formatMessage"])({id:"user.background"})}),a("background",{initialValue:t.background})(o.a.createElement(H,{width:600,height:120}))))),o.a.createElement(D["a"],null,o.a.createElement(C["a"],Object.assign({},n),o.a.createElement(I["a"].Item,Object.assign({},i),o.a.createElement(S["a"],{type:"primary",htmlType:"submit",loading:e},Object(g["formatMessage"])({id:"common.submit"}))))))}}var V=I["a"].create()(K),z=(a("2qtc"),a("kLXV"));class P extends l["Component"]{constructor(){super(...arguments),this.state={loading:!1,visible:!1,key:null},this.handleSubmit=(()=>{var e=this.state.key,t=this.props.submit;this.setState({loading:!0}),J["a"].money({data:{key:e}}).then(e=>{e&&(N["a"].success(Object(g["formatMessage"])({id:"user.pay.key.success"})),this.cancel(),t())}).finally(()=>{this.setState({loading:!1})})}),this.asyncKey=(e=>{this.setState({key:e.target.value})}),this.show=(()=>{this.setState({visible:!0})}),this.cancel=(()=>{this.setState({visible:!1,loading:!1,key:null})})}componentDidMount(){}render(){var e=this.state,t=e.loading,a=e.visible,r=e.key;return o.a.createElement(o.a.Fragment,null,o.a.createElement(s["a"],{color:"#108ee9",onClick:this.show},Object(g["formatMessage"])({id:"user.pay"})),o.a.createElement(z["a"],{visible:a,confirmLoading:t,onCancel:this.cancel,onOk:this.handleSubmit,title:Object(g["formatMessage"])({id:"user.pay.key"})},o.a.createElement(Y["a"],{placeholder:Object(g["formatMessage"])({id:"user.pay.key.tips"}),value:r,onChange:this.asyncKey})))}}var q=P,Q=i["a"].TabPane,R=p["a"].div`
  padding: 60px 0px 20px 0;

  .header {
    background-color: rgba(0, 0, 0, 0.3);
    height: 200px;
    border-radius: 4px;
    background-size: cover;
    display: grid;
    grid-template-columns: 200px 1fr;

    .avatar {
      display: flex;
      justify-content: center;
      align-items: center;

      img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.5);
      }
    }

    .content {
      height: 200px;

      .info {
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: flex-start;
        flex-wrap: wrap;
        height: 100%;
        width: 500px;

        .list {
          width: 250px;
          line-height: 40px;

          div:nth-child(2) {
            margin-right: 10px;
            margin-left: 20px;
          }
        }
      }
    }
  }

  .main-info {
    margin-top: 20px;
    background-color: white;
    border-radius: 4px;
    padding: 5px 20px 20px 20px;
  }
`,W=class extends l["Component"]{constructor(){super(...arguments),this.state={},this.initData=(()=>{var e=this.props.dispatch,t=JSON.parse(localStorage.getItem("userInfo"));e({type:"user/getInfo",payload:{params:{slug:t.name}}})}),this.logout=(()=>{var e=this.props.dispatch;e({type:"auth/logout",payload:{}})}),this.submit=(()=>{this.initData()}),this.goShop=(()=>{m["a"].push("/newShop")})}componentDidMount(){this.initData()}render(){var e=this.props,t=e.user.info,a=e.loading;return o.a.createElement(r["a"],{spinning:!!a},o.a.createElement(R,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"header",style:{backgroundImage:`url(${t.background})`}},o.a.createElement("div",{className:"avatar"},o.a.createElement("img",{src:t.avatar,alt:""})),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"info"},o.a.createElement("div",{className:"list"},o.a.createElement(s["a"],null,Object(g["formatMessage"])({id:"auth.username"})),o.a.createElement(s["a"],{color:"magenta"},t.name),o.a.createElement(s["a"],{color:"#f50",onClick:this.logout},Object(g["formatMessage"])({id:"user.logout"}))),o.a.createElement("div",{className:"list"},o.a.createElement(s["a"],null,Object(g["formatMessage"])({id:"user.email"})),o.a.createElement(s["a"],{color:"volcano"},t.email)),o.a.createElement("div",{className:"list"},o.a.createElement(s["a"],null,Object(g["formatMessage"])({id:"user.score"})),o.a.createElement(s["a"],{color:"green"},t.score)),o.a.createElement("div",{className:"list"},o.a.createElement(s["a"],null,Object(g["formatMessage"])({id:"user.money"})),o.a.createElement(s["a"],{color:"cyan"},t.money),o.a.createElement(q,{submit:this.submit})),o.a.createElement("div",{className:"list"},o.a.createElement(s["a"],null,Object(g["formatMessage"])({id:"user.level"})),o.a.createElement(s["a"],{color:"blue"},"LV ",t.level),o.a.createElement(s["a"],{color:"#6600ff",onClick:this.goShop},Object(g["formatMessage"])({id:"user.buy"}))),t.level>1&&o.a.createElement("div",{className:"list"},o.a.createElement(s["a"],null,Object(g["formatMessage"])({id:"user.expired"})),o.a.createElement(s["a"],{color:"purple"},u()((new Date).getTime()+1e3*t.expired).format("YYYY-MM-DD")))))),t.name&&o.a.createElement("div",{className:"main-info"},o.a.createElement(i["a"],{defaultActiveKey:"1"},o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate"}),key:"1"},o.a.createElement(i["a"],{tabPosition:"left"},o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate.history"}),key:"1"},o.a.createElement(b["b"],{list:t.animate.history,type:"animate"})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate.own"}),key:"2"},o.a.createElement(b["b"],{list:t.animate.own,type:"animate",status:!0})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate.like"}),key:"3"},o.a.createElement(b["b"],{list:t.animate.like,type:"animate"})))),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.comic"}),key:"2"},o.a.createElement(i["a"],{tabPosition:"left"},o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate.history"}),key:"1"},o.a.createElement(b["b"],{list:t.comic.history,type:"comic"})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate.own"}),key:"2"},o.a.createElement(b["b"],{list:t.comic.own,type:"comic",status:!0})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.animate.like"}),key:"3"},o.a.createElement(b["b"],{list:t.comic.like,type:"comic"})))),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.post"}),key:"3"},o.a.createElement(i["a"],{tabPosition:"left"},o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.post.history"}),key:"1"},o.a.createElement(h["a"],{list:t.post.history})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.post.own"}),key:"2"},o.a.createElement(h["a"],{list:t.post.own,status:!0})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.post.like"}),key:"3"},o.a.createElement(h["a"],{list:t.post.like})))),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.comment"}),key:"4"},o.a.createElement(M,{data:t.comment.own})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.order"}),key:"5"},o.a.createElement(v,{data:t.order})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.report"}),key:"6"},o.a.createElement(w,{data:t.report})),o.a.createElement(Q,{tab:Object(g["formatMessage"])({id:"user.setting"}),key:"7"},o.a.createElement(V,{info:t,submit:this.submit})))))))}};W=n["a"]([Object(c["connect"])(e=>{var t=e.user,a=e.loading;return{user:t,loading:a.effects["user/getInfo"]}})],W);t["default"]=W}}]);