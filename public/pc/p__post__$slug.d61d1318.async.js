(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{PZnI:function(e,n,t){"use strict";t.r(n);t("R9oj");var a=t("ECub"),r=t("mrSG"),o=t("q1tI"),s=t.n(o),l=t("MuoO"),i=(t("1YHl"),t("VNzZ")),c=t("fFZ8"),p=t.n(c),u=t("vOnD"),m=t("XEok"),d=t("8KYf"),g=t("mNhR"),h=t("TSYQ"),f=t.n(h),v=t("eNRF"),E=t("rmP6"),b=t.n(E),x=(t("91UR"),e=>{var n=e.value,t={toolbar:!1};return s.a.createElement(b.a,{value:n,theme:"snow",readOnly:!0,modules:t})}),w=x,y=t("l61h");function k(){var e=p()(["\n  padding: 60px;\n\n  .post {\n    display: grid;\n    grid-template-columns: 120px 1fr 320px;\n\n    .content {\n      padding: 0 20px;\n\n      .markdown {\n        background-color: white;\n        margin-bottom: 20px;\n        user-select: text;\n\n        img {\n          width: 100%;\n          margin-bottom: 20px;\n        }\n\n        .ql-container.ql-snow {\n          border: none;\n        }\n\n        .ql-editor {\n          font-size: 1.2em;\n        }\n      }\n    }\n\n    .right {\n      .author {\n        background-color: white;\n        border-radius: 4px;\n        width: 100%;\n        padding: 15px;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n\n        .author-avatar {\n          height: 80px;\n          width: 80px;\n          background-size: cover;\n          background-position: center;\n          border-radius: 50%;\n          background-color: rgba(0, 0, 0, 0.05);\n        }\n\n        span {\n          line-height: 40px;\n          font-size: 20px;\n          display: block;\n          overflow: hidden;\n          width: 100%;\n          text-align: center;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        p {\n          opacity: 0.6;\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .left {\n      padding-left: 30px;\n      .list {\n        width: 50px;\n        height: 50px;\n        background-color: white;\n        border-radius: 50%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        position: relative;\n        box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.04);\n        cursor: pointer;\n        margin-bottom: 30px;\n\n        i {\n          font-size: 1.7em;\n          opacity: 0.8;\n        }\n\n        &:hover {\n          i {\n            opacity: 0.6;\n          }\n        }\n\n        &.active {\n          i {\n            color: #ffa726;\n          }\n        }\n\n        span {\n          position: absolute;\n          font-size: 12px;\n          background-color: #b2bac2;\n          color: white;\n          padding: 0 5px;\n          top: 0;\n          left: 40px;\n          border-radius: 10px;\n        }\n      }\n    }\n  }\n"]);return k=function(){return e},e}var N=u["a"].div(k()),j=(e,n)=>{return e.like.filter(e=>e.slug===n).length>0},D=e=>{var n=e.info,t=e.userAction,a=e.user;!n.author&&(n.author={avatar:window.config.avatar,name:"\u8d26\u53f7\u4e0d\u5b58\u5728",introduce:"\u7528\u6237\u5df2\u5220\u9664",level:0});var r=n.slug,l=Object(o["useContext"])(m["a"]),c=Object(o["useMemo"])(()=>l,[l]);return Object(o["useEffect"])(()=>{}),s.a.createElement(N,{color:c},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"post"},s.a.createElement("div",{className:"left"},s.a.createElement(i["a"],{offsetTop:100},s.a.createElement(y["a"],null,s.a.createElement("div",{className:f()("list",{active:j(a,n.slug)}),onClick:t},s.a.createElement(g["a"],{type:"icon-yizhuifan"}),s.a.createElement("span",null,n.like))),s.a.createElement("div",{className:"list"},s.a.createElement(g["a"],{type:"icon-comment1"}),s.a.createElement("span",null,n.comment)),s.a.createElement(y["a"],null,s.a.createElement(v["a"],{type:"post",target:n._id,addon:r},s.a.createElement("div",{className:"list"},s.a.createElement(g["a"],{type:"icon-guanyuwomen"})))))),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"markdown"},s.a.createElement("img",{src:n.cover,alt:""}),s.a.createElement(w,{value:n.content})),s.a.createElement(d["a"],{type:"post",belong:r})),s.a.createElement("div",{className:"right"},s.a.createElement("div",{className:"author"},s.a.createElement("div",{className:"author-avatar",style:{backgroundImage:"url(".concat(n.author.avatar||window.config.avatar,")")}}),s.a.createElement("span",null,n.author.name),s.a.createElement("p",null,"LV:",n.author.level),s.a.createElement("p",null,n.author.introduce))))))},O=D,z=t("Y8ry"),I=t("LLXN"),A=t("Dp36"),Y=class extends o["Component"]{constructor(e){super(e),this.initData=(()=>{var e=this.state.slug,n=this.props.dispatch;n({type:"post/getInfo",payload:{params:{slug:e}}})}),this.userAction=(()=>{var e=this.state.slug,n=this.props.dispatch;A["a"].postUserAction({data:{type:"post",kind:"like",slug:e}}).then(e=>{e&&n({type:"user/refreshInfo",payload:{}})})}),this.state={slug:e.match.params.slug}}static getDerivedStateFromProps(e,n){return e.match.params.slug!==n.slug?{slug:e.match.params.slug}:null}componentDidMount(){this.initData()}componentDidUpdate(e,n){n.slug!==this.state.slug&&this.initData()}render(){var e=this.props,n=e.user.info.post,t=e.post.info,r=e.loading,o=this.state.slug;return s.a.createElement(s.a.Fragment,null,r?s.a.createElement(z["a"],null):t.slug===o?s.a.createElement(O,{info:t,userAction:this.userAction,user:n}):s.a.createElement(a["a"],{description:s.a.createElement("span",null,Object(I["formatMessage"])({id:"common.nodata.tips"})),style:{transform:"translateY(calc(40vh - 50%))"}}))}};Y=r["a"]([Object(l["connect"])(e=>{var n=e.user,t=e.post,a=e.loading;return{user:n,post:t,loading:a.effects["post/getInfo"]}})],Y);n["default"]=Y}}]);