(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{i1J9:function(e,t,a){"use strict";a.r(t);a("+BJd");var s=a("mr32"),n=(a("T2oS"),a("W9HT")),r=a("fFZ8"),i=a.n(r),o=(a("Znn+"),a("ZTPi")),l=a("mrSG"),c=a("q1tI"),m=a.n(c),d=a("MuoO"),u=a("3a4m"),g=a.n(u),p=a("wd/R"),b=a.n(p),h=a("LLXN"),f=a("vOnD"),E=a("/88p"),j=a("gmfD"),y=(a("g9YV"),a("wCAj")),M=(a("IzEo"),a("bx4M")),O=(a("Telt"),a("Tckk"));class v extends c["Component"]{componentDidMount(){}render(){var e=this.props.data,t=[{title:Object(h["formatMessage"])({id:"user.content"}),dataIndex:"content"},{title:Object(h["formatMessage"])({id:"user.image"}),dataIndex:"image",render:e=>e.map(e=>m.a.createElement(O["a"],{src:e,shape:"square"}))},{title:Object(h["formatMessage"])({id:"user.updatedAt"}),dataIndex:"updatedAt",render:e=>b()(e).format("YYYY-MM-DD HH:mm:ss")}],a={showSizeChanger:!0,showQuickJumper:!0,total:e.length,showTotal:e=>"".concat(Object(h["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(h["formatMessage"])({id:"common.all.item"}))};return m.a.createElement(M["a"],{className:"tableList",bordered:!1},m.a.createElement(y["a"],{rowKey:"slug",columns:t,dataSource:e,pagination:a}))}}var x=v;class k extends c["Component"]{componentDidMount(){}render(){var e=this.props.data,t=[{title:Object(h["formatMessage"])({id:"user.order.number"}),dataIndex:"_id"},{title:Object(h["formatMessage"])({id:"user.order.createdAt"}),dataIndex:"createdAt",render:e=>b()(e).format("YYYY-MM-DD HH:mm:ss")}],a={showSizeChanger:!0,showQuickJumper:!0,total:e.length,showTotal:e=>"".concat(Object(h["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(h["formatMessage"])({id:"common.all.item"}))};return m.a.createElement(M["a"],{className:"tableList",bordered:!1},m.a.createElement(y["a"],{rowKey:"slug",columns:t,dataSource:e,pagination:a}))}}var w=k,S=(a("Awhp"),a("KrTs"));class C extends c["Component"]{componentDidMount(){}render(){var e=this.props.data,t={draft:{text:Object(h["formatMessage"])({id:"user.own.status.draft"}),badge:"processing",value:"draft"},publish:{text:Object(h["formatMessage"])({id:"user.own.status.publish"}),badge:"success",value:"publish"},reject:{text:Object(h["formatMessage"])({id:"user.own.status.reject"}),badge:"error",value:"reject"}},a={animate:Object(h["formatMessage"])({id:"user.animate"}),post:Object(h["formatMessage"])({id:"user.post"}),comment:Object(h["formatMessage"])({id:"user.comment"}),others:Object(h["formatMessage"])({id:"user.others"})},s=[{title:Object(h["formatMessage"])({id:"user.content"}),dataIndex:"content"},{title:Object(h["formatMessage"])({id:"user.image"}),dataIndex:"image",render:e=>e.map(e=>m.a.createElement(O["a"],{src:e,shape:"square"}))},{title:Object(h["formatMessage"])({id:"user.type"}),dataIndex:"type",render:e=>a[e]},{title:Object(h["formatMessage"])({id:"user.status"}),dataIndex:"status",render(e){return m.a.createElement(S["a"],{status:t[e].badge,text:t[e].text})}},{title:Object(h["formatMessage"])({id:"user.updatedAt"}),dataIndex:"updatedAt",render:e=>b()(e).format("YYYY-MM-DD HH:mm:ss")}],n={showSizeChanger:!0,showQuickJumper:!0,total:e.length,showTotal:e=>"".concat(Object(h["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(h["formatMessage"])({id:"common.all.item"}))};return m.a.createElement(M["a"],{className:"tableList",bordered:!1},m.a.createElement(y["a"],{rowKey:"slug",columns:s,dataSource:e,pagination:n}))}}var D=C,I=(a("+L6B"),a("2/Rp")),Y=(a("jCWc"),a("kPKH")),N=(a("14J3"),a("BMrR")),T=(a("y8nQ"),a("Vl3Y")),A=(a("5NDa"),a("5rEg")),L=(a("miYZ"),a("tsqr")),H=(a("DZo9"),a("8z0m")),J=(a("Pwec"),a("CtXQ")),K=a("EQW2");class V extends c["Component"]{constructor(){super(...arguments),this.state={loading:!1},this.handleChange=(e=>{var t=this.props.onChange;if("uploading"===e.file.status)this.setState({loading:!0});else if("done"===e.file.status){var a=e.file.response.data[0].path;this.setState({loading:!1}),t(a)}else"error"===e.file.status&&(L["a"].error("upload error"),this.setState({loading:!1}))})}render(){var e=this.state.loading,t=m.a.createElement("div",null,m.a.createElement(J["a"],{type:e?"loading":"plus"}),m.a.createElement("div",null,"Upload")),a=this.props,s=a.type,n=void 0===s?"others":s,r=a.value,i=a.width,o=void 0===i?128:i,l=a.height,c=void 0===l?128:l;return m.a.createElement(H["a"],Object.assign({name:"file",style:{width:"".concat(o,"px"),height:"".concat(c,"px")},listType:"picture-card",showUploadList:!1,onChange:this.handleChange,data:{type:n}},K["a"]),r?m.a.createElement("img",{src:r,alt:"avatar",style:{maxHeight:"100%",maxWidth:"100%"}}):t)}}var z=V,P=a("Dp36");class q extends c["Component"]{constructor(){super(...arguments),this.state={loading:!1},this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.submit,s=t.info;this.props.form.validateFields((e,t)=>{e?L["a"].destroy():(this.setState({loading:!0}),P["a"].putUserInfo({params:{slug:s.name},data:t}).then(e=>{e&&(L["a"].success(Object(h["formatMessage"])({id:"common.submit.success"})),a())}).finally(()=>{this.setState({loading:!1})}))})})}componentDidMount(){}render(){var e=this.state.loading,t=this.props.info,a=this.props.form.getFieldDecorator,s=A["a"].TextArea,n={labelCol:{span:4},wrapperCol:{span:18,offset:1}},r={labelCol:{span:4},wrapperCol:{span:18,offset:5}},i={xs:24,sm:24,md:24,lg:24,xl:12};return m.a.createElement(T["a"],{onSubmit:this.handleSubmit},m.a.createElement(N["a"],{type:"flex",justify:"space-between",align:"top"},m.a.createElement(Y["a"],Object.assign({},i),m.a.createElement(T["a"].Item,Object.assign({},n,{label:Object(h["formatMessage"])({id:"user.name"})}),m.a.createElement(A["a"],{placeholder:Object(h["formatMessage"])({id:"user.tips.fill.name"}),disabled:!0,value:t.name})),m.a.createElement(T["a"].Item,Object.assign({},n,{label:Object(h["formatMessage"])({id:"user.email"})}),a("email",{initialValue:t.email,rules:[{required:!0,message:Object(h["formatMessage"])({id:"user.tips.fill.email"})}]})(m.a.createElement(A["a"],{placeholder:Object(h["formatMessage"])({id:"user.tips.fill.email"})}))),m.a.createElement(T["a"].Item,Object.assign({},n,{label:Object(h["formatMessage"])({id:"user.introduce"})}),a("introduce",{initialValue:t.introduce})(m.a.createElement(s,{placeholder:Object(h["formatMessage"])({id:"user.tips.fill.introduce"}),autosize:{minRows:6,maxRows:8}})))),m.a.createElement(Y["a"],Object.assign({},i),m.a.createElement(T["a"].Item,Object.assign({},n,{label:Object(h["formatMessage"])({id:"user.avatar"})}),a("avatar",{initialValue:t.avatar})(m.a.createElement(z,{width:110,height:110}))),m.a.createElement(T["a"].Item,Object.assign({},n,{label:Object(h["formatMessage"])({id:"user.background"})}),a("background",{initialValue:t.background})(m.a.createElement(z,{width:600,height:120}))))),m.a.createElement(N["a"],null,m.a.createElement(Y["a"],Object.assign({},i),m.a.createElement(T["a"].Item,Object.assign({},r),m.a.createElement(I["a"],{type:"primary",htmlType:"submit",loading:e},Object(h["formatMessage"])({id:"common.submit"}))))))}}var Q=T["a"].create()(q),R=(a("2qtc"),a("kLXV"));class Z extends c["Component"]{constructor(){super(...arguments),this.state={loading:!1,visible:!1,key:null},this.handleSubmit=(()=>{var e=this.state.key,t=this.props.submit;this.setState({loading:!0}),P["a"].money({data:{key:e}}).then(e=>{e&&(L["a"].success(Object(h["formatMessage"])({id:"user.pay.key.success"})),this.cancel(),t())}).finally(()=>{this.setState({loading:!1})})}),this.asyncKey=(e=>{this.setState({key:e.target.value})}),this.show=(()=>{this.setState({visible:!0})}),this.cancel=(()=>{this.setState({visible:!1,loading:!1,key:null})})}componentDidMount(){}render(){var e=this.state,t=e.loading,a=e.visible,n=e.key;return m.a.createElement(m.a.Fragment,null,m.a.createElement(s["a"],{color:"#108ee9",onClick:this.show},Object(h["formatMessage"])({id:"user.pay"})),m.a.createElement(R["a"],{visible:a,confirmLoading:t,onCancel:this.cancel,onOk:this.handleSubmit,title:Object(h["formatMessage"])({id:"user.pay.key"})},m.a.createElement(A["a"],{placeholder:Object(h["formatMessage"])({id:"user.pay.key.tips"}),value:n,onChange:this.asyncKey})))}}var F=Z;function W(){var e=i()(["\n  padding: 60px 0px 20px 0;\n\n  .header {\n    background-color: rgba(0, 0, 0, 0.3);\n    height: 200px;\n    border-radius: 4px;\n    background-size: cover;\n    display: grid;\n    grid-template-columns: 200px 1fr;\n\n    .avatar {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n\n      img {\n        width: 100px;\n        height: 100px;\n        border-radius: 50%;\n        background-color: rgba(255, 255, 255, 0.5);\n      }\n    }\n\n    .content {\n      height: 200px;\n\n      .info {\n        padding: 20px 0;\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-wrap: wrap;\n        height: 100%;\n        width: 500px;\n\n        .list {\n          width: 250px;\n          line-height: 40px;\n\n          div:nth-child(2) {\n            margin-right: 10px;\n            margin-left: 20px;\n          }\n        }\n      }\n    }\n  }\n\n  .main-info {\n    margin-top: 20px;\n    background-color: white;\n    border-radius: 4px;\n    padding: 5px 20px 20px 20px;\n  }\n"]);return W=function(){return e},e}var B=o["a"].TabPane,U=f["a"].div(W()),X=class extends c["Component"]{constructor(){super(...arguments),this.state={},this.initData=(()=>{var e=this.props.dispatch,t=JSON.parse(localStorage.getItem("userInfo"));e({type:"user/getInfo",payload:{params:{slug:t.name}}})}),this.logout=(()=>{var e=this.props.dispatch;e({type:"auth/logout",payload:{}})}),this.submit=(()=>{this.initData()}),this.goShop=(()=>{g.a.push("/newShop")})}componentDidMount(){this.initData()}render(){var e=this.props,t=e.user.info,a=e.loading;return m.a.createElement(n["a"],{spinning:!!a},m.a.createElement(U,null,m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"header",style:{backgroundImage:"url(".concat(t.background,")")}},m.a.createElement("div",{className:"avatar"},m.a.createElement("img",{src:t.avatar,alt:""})),m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"info"},m.a.createElement("div",{className:"list"},m.a.createElement(s["a"],null,Object(h["formatMessage"])({id:"auth.username"})),m.a.createElement(s["a"],{color:"magenta"},t.name),m.a.createElement(s["a"],{color:"#f50",onClick:this.logout},Object(h["formatMessage"])({id:"user.logout"}))),m.a.createElement("div",{className:"list"},m.a.createElement(s["a"],null,Object(h["formatMessage"])({id:"user.email"})),m.a.createElement(s["a"],{color:"volcano"},t.email)),m.a.createElement("div",{className:"list"},m.a.createElement(s["a"],null,Object(h["formatMessage"])({id:"user.score"})),m.a.createElement(s["a"],{color:"green"},t.score)),m.a.createElement("div",{className:"list"},m.a.createElement(s["a"],null,Object(h["formatMessage"])({id:"user.money"})),m.a.createElement(s["a"],{color:"cyan"},t.money),m.a.createElement(F,{submit:this.submit})),m.a.createElement("div",{className:"list"},m.a.createElement(s["a"],null,Object(h["formatMessage"])({id:"user.level"})),m.a.createElement(s["a"],{color:"blue"},"LV ",t.level),m.a.createElement(s["a"],{color:"#6600ff",onClick:this.goShop},Object(h["formatMessage"])({id:"user.buy"}))),t.level>1&&m.a.createElement("div",{className:"list"},m.a.createElement(s["a"],null,Object(h["formatMessage"])({id:"user.expired"})),m.a.createElement(s["a"],{color:"purple"},b()((new Date).getTime()+1e3*t.expired).format("YYYY-MM-DD")))))),t.name&&m.a.createElement("div",{className:"main-info"},m.a.createElement(o["a"],{defaultActiveKey:"1"},m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate"}),key:"1"},m.a.createElement(o["a"],{tabPosition:"left"},m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate.history"}),key:"1"},m.a.createElement(E["b"],{list:t.animate.history,type:"animate"})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate.own"}),key:"2"},m.a.createElement(E["b"],{list:t.animate.own,type:"animate",status:!0})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate.like"}),key:"3"},m.a.createElement(E["b"],{list:t.animate.like,type:"animate"})))),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.comic"}),key:"2"},m.a.createElement(o["a"],{tabPosition:"left"},m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate.history"}),key:"1"},m.a.createElement(E["b"],{list:t.comic.history,type:"comic"})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate.own"}),key:"2"},m.a.createElement(E["b"],{list:t.comic.own,type:"comic",status:!0})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.animate.like"}),key:"3"},m.a.createElement(E["b"],{list:t.comic.like,type:"comic"})))),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.post"}),key:"3"},m.a.createElement(o["a"],{tabPosition:"left"},m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.post.history"}),key:"1"},m.a.createElement(j["a"],{list:t.post.history})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.post.own"}),key:"2"},m.a.createElement(j["a"],{list:t.post.own,status:!0})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.post.like"}),key:"3"},m.a.createElement(j["a"],{list:t.post.like})))),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.comment"}),key:"4"},m.a.createElement(x,{data:t.comment.own})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.order"}),key:"5"},m.a.createElement(w,{data:t.order})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.report"}),key:"6"},m.a.createElement(D,{data:t.report})),m.a.createElement(B,{tab:Object(h["formatMessage"])({id:"user.setting"}),key:"7"},m.a.createElement(Q,{info:t,submit:this.submit})))))))}};X=l["a"]([Object(d["connect"])(e=>{var t=e.user,a=e.loading;return{user:t,loading:a.effects["user/getInfo"]}})],X);t["default"]=X}}]);