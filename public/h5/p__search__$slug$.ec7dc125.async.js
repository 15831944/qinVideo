(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{UhD9:function(e,t,a){"use strict";a.r(t);a("IzEo");var s=a("bx4M"),i=a("p0pE"),n=a.n(i),r=a("fFZ8"),c=a.n(r),o=(a("5NDa"),a("5rEg")),m=(a("Znn+"),a("ZTPi")),l=a("mrSG"),p=a("q1tI"),h=a.n(p),u=a("MuoO"),y=a("vOnD"),d=a("LLXN"),g=a("mNhR"),E=a("mOtZ"),b=a("WqWh"),v=a("faBS"),f=a("/88p"),Q=a("gmfD"),q=a("3a4m"),C=a.n(q);function D(){var e=c()(["\n  padding: 60px 15px 0 15px;\n\n  .search {\n    width: 100%;\n    margin: 40px auto;\n  }\n"]);return D=function(){return e},e}var O=m["a"].TabPane,S=o["a"].Search,x=y["a"].div(D()),L=class extends p["Component"]{constructor(e){super(e),this.initData=(()=>{var e=this.state.slug,t=this.props.dispatch;e&&(t({type:"post/queryList",payload:{query:{title:e},addon:{type:"search"}}}),t({type:"animate/queryList",payload:{query:{title:e},addon:{type:"search"}}}),t({type:"comic/queryList",payload:{query:{title:e},addon:{type:"search"}}}))}),this.searchChange=((e,t)=>{var a=this.props.dispatch,s=Object(v["b"])({query:e}),i=this.state.slug;a({type:"".concat(t,"/queryList"),payload:{query:n()({},s,{title:i}),addon:{type:"search"}}})}),this.listQuery={animate:e=>{var t=this.state.animateQuery,a=n()({},t,e);this.setState({animateQuery:a}),this.searchChange(a,"animate")},comic:e=>{var t=this.state.comicQuery,a=n()({},t,e);this.setState({comicQuery:a}),this.searchChange(a,"comic")},post:e=>{var t=this.state.postQuery,a=n()({},t,e);this.setState({query:a}),this.searchChange(a,"post")}},this.searchSubmit=(e=>{C.a.replace({pathname:"/search/".concat(e)})}),this.state={slug:e.match.params.slug,animateQuery:{key:"time",sort:!1,list:!1,size:21,page:1},comicQuery:{key:"time",sort:!1,list:!1,size:21,page:1},postQuery:{key:"time",sort:!1,list:!1,size:21,page:1}}}static getDerivedStateFromProps(e,t){return e.match.params.slug!==t.slug?{slug:e.match.params.slug}:null}componentDidMount(){this.initData()}componentDidUpdate(e,t){t.slug!==this.state.slug&&this.initData()}render(){var e=this.props,t=e.post,a=e.post.search,i=e.comic,r=e.comic.search,c=e.animate,o=e.animate.search,l=e.loadingPost,p=e.loadingComic,u=e.loadingAnimate,y=this.state,v=y.animateQuery,q=y.comicQuery,C=y.postQuery,D={animate:c.total.search||0,comic:i.total.search||0,post:t.total.search||0};return h.a.createElement(x,null,h.a.createElement(s["a"],{bordered:!1},h.a.createElement("div",{className:"search"},h.a.createElement(S,{placeholder:Object(d["formatMessage"])({id:"common.input.tips"}),size:"large",onSearch:this.searchSubmit,enterButton:h.a.createElement(h.a.Fragment,null,h.a.createElement(g["a"],{type:"icon-sousuo"}),h.a.createElement("span",null,Object(d["formatMessage"])({id:"common.search"})))})),h.a.createElement(m["a"],{defaultActiveKey:"1",onChange:()=>{}},h.a.createElement(O,{tab:Object(d["formatMessage"])({id:"common.animate"}),key:"1"},h.a.createElement(s["a"],{bordered:!1,style:{marginBottom:"20px"},loading:u},h.a.createElement(E["a"],{value:v,onChange:this.listQuery.animate}),v.list?h.a.createElement(f["b"],{type:"animate",list:o}):h.a.createElement(f["a"],{type:"animate",list:o}),h.a.createElement(b["a"],{value:n()({},v,{total:D.animate}),onChange:this.listQuery.animate}))),h.a.createElement(O,{tab:Object(d["formatMessage"])({id:"common.comic"}),key:"2"},h.a.createElement(s["a"],{bordered:!1,style:{marginBottom:"20px"},loading:p},h.a.createElement(E["a"],{value:q,onChange:this.listQuery.comic}),q.list?h.a.createElement(f["b"],{type:"comic",list:r}):h.a.createElement(f["a"],{type:"comic",list:r}),h.a.createElement(b["a"],{value:n()({},q,{total:D.comic}),onChange:this.listQuery.comic}))),h.a.createElement(O,{tab:Object(d["formatMessage"])({id:"common.post"}),key:"3"},h.a.createElement(s["a"],{bordered:!1,style:{marginBottom:"20px"},loading:l},h.a.createElement(Q["b"],{list:a}),h.a.createElement(b["a"],{value:n()({},C,{total:D.post}),onChange:this.listQuery.post}))))))}};L=l["a"]([Object(u["connect"])(e=>{var t=e.animate,a=e.comic,s=e.post,i=e.loading;return{post:s,animate:t,comic:a,loadingPost:i.effects["post/queryList"],loadingAnimate:i.effects["animate/queryList"],loadingComic:i.effects["comic/queryList"]}})],L),t["default"]=L}}]);