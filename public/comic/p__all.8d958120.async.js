(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{GSZA:function(e,t,a){"use strict";a.r(t);a("IzEo");var i=a("bx4M"),r=a("p0pE"),n=a.n(r),s=a("mrSG"),l=a("q1tI"),o=a.n(l),c=a("MuoO"),p=a("L6Kr"),d=a("mOtZ"),m=a("WqWh"),g=a("/88p"),u=a("qIgq"),y=a.n(u),h=a("fFZ8"),v=a.n(h),E=a("vOnD"),f=a("Gwa3"),b=a("LLXN");function q(){var e=v()(["\n  display: grid;\n  grid-gap: 24px;\n  grid-template-columns: 1fr;\n\n  .list {\n    width: 100%;\n    display: grid;\n    grid-template-columns: 50px 1fr;\n\n    span {\n      padding: 3px 0;\n    }\n\n    .right {\n      span {\n        margin-right: 8px;\n        cursor: pointer;\n        display: inline-block;\n        padding: 3px 12px;\n        border-radius: 5px;\n\n        &.active,\n        &:hover {\n          background-color: ",";\n          color: white;\n        }\n      }\n    }\n  }\n"]);return q=function(){return e},e}var O=E["a"].div(q(),e=>e.color),k=e=>{var t=e.onChange,a=e.value,i=a.area,r=a.year,s=a.kind,c=(a.tag,e.list),p=void 0===c?[]:c,d=Object(l["useContext"])(f["a"]),m=Object(l["useMemo"])(()=>d,[d]),g=Object(l["useState"])(i),u=y()(g,2),h=u[0],v=u[1],E=Object(l["useState"])(r),q=y()(E,2),k=q[0],C=q[1],w=Object(l["useState"])(s),x=y()(w,2),j=x[0],S=x[1],L=Object(l["useState"])(s),N=y()(L,2),D=N[0],M=N[1],I=["area","year","kind","tag"],Q={area:h,year:k,kind:j,tag:D},z={area:v,year:C,kind:S,tag:M},A=(e,a)=>{var i=Q[e]===a?"":a;t(n()({},Q,{[e]:i})),z[e](i)},B=e=>{return p.filter(t=>t.type==="c".concat(e))};return o.a.createElement(O,{color:m},I.map(e=>o.a.createElement("div",{className:"list",key:e},o.a.createElement("span",null,Object(b["formatMessage"])({id:"all.filter.".concat(e)}),":"),o.a.createElement("div",{className:"right"},B(e).map(t=>o.a.createElement("span",{className:Q[e]===t._id?"active":"",key:t._id,onClick:()=>{A(e,t._id)}},t.name))))))},C=k,w=a("3a4m"),x=a.n(w),j=a("YO1i"),S=class extends l["Component"]{constructor(e){super(e),this.initData=(e=>{var t=e.query,a=void 0===t?this.state.query:t,i=e.filter,r=void 0===i?this.state.filter:i,s=this.props.dispatch;s({type:"comic/queryList",payload:{query:n()({},a,r),addon:{type:"all"}}}),x.a.replace({pathname:"/all",query:n()({},a,r)}),window.scrollTo(0,0)}),this.initCategory=(()=>{var e=this.props.dispatch;e({type:"category/queryList",payload:{params:{type:"comic"}}})}),this.listQuery=(e=>{var t=this.state.query,a=n()({},t,e);this.setState({query:a},()=>{this.initData({})})}),this.filterQuery=(e=>{var t=this.state.filter,a=n()({},t,e);this.setState({filter:a,query:n()({},this.state.query,{page:1})},()=>{this.initData({})})}),this.toggleList=(e=>{this.setState({list:e})});var t=e.location.query;this.state={query:{sortBy:t.sortBy||"updatedAt",sortOrder:t.sortOrder||-1,size:t.size?parseInt(t.size):20,page:t.page?parseInt(t.page):1},filter:{area:t.area||"",year:t.year||"",kind:t.kind||"",tag:t.tag||""},list:!!t.list&&"true"===t.list}}componentDidMount(){this.initData({}),this.initCategory()}render(){var e=this.state,t=e.query,a=e.filter,r=e.list,s=this.props,l=s.comic,c=s.category,u=s.loadingComic,y=s.loadingCategory,h=l.all.list||[],v=l.all.total||0;return o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement(p["a"],{img:window.config.allAnimate,span:Object(b["formatMessage"])({id:"comic.all.title"})}),o.a.createElement(i["a"],{bordered:!1,style:{margin:"20px 0"},loading:y},o.a.createElement(C,{value:a,onChange:this.filterQuery,list:c.all})),o.a.createElement(i["a"],{bordered:!1,style:{marginBottom:"20px"},loading:u&&0===v},o.a.createElement(d["a"],{value:t,onChange:this.listQuery},o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:r?"":"active",onClick:()=>this.toggleList(!1)},o.a.createElement(j["a"],{type:"icon-settings-filter"})),o.a.createElement("span",{className:r?"active":"",onClick:()=>this.toggleList(!0)},o.a.createElement(j["a"],{type:"icon-apps"})))),r?o.a.createElement(g["b"],{list:h}):o.a.createElement(g["a"],{list:h}),o.a.createElement(m["a"],{value:n()({},t,{total:v}),onChange:this.listQuery}))))}};S=Object(s["a"])([Object(c["connect"])(e=>{var t=e.comic,a=e.category,i=e.loading;return{comic:t,category:a,loadingComic:i.models.comic,loadingCategory:i.models.category}})],S);t["default"]=S}}]);