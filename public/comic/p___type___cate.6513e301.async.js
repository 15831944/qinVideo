(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{EN87:function(t,e,a){"use strict";a.r(e);a("IzEo");var i=a("bx4M"),s=a("p0pE"),r=a.n(s),n=a("mrSG"),o=a("q1tI"),c=a.n(o),l=a("MuoO"),p=a("L6Kr"),m=a("mOtZ"),h=a("WqWh"),d=a("/88p"),u=a("3a4m"),y=a.n(u),g=a("YO1i"),v=class extends o["Component"]{constructor(t){super(t),this.initData=(t=>{var e=t.query,a=void 0===e?this.state.query:e,i=t.filter,s=void 0===i?this.state.filter:i,n=this.props,o=n.dispatch,c=n.location,l=this.state,p=l.cate,m=l.type;o({type:"comic/queryList",payload:{query:r()({},a,s,{[m]:p}),addon:{type:p}}}),y.a.replace({pathname:c.pathname,query:r()({},a,s)}),window.scrollTo(0,0)}),this.initCategory=(()=>{var t=this.props.dispatch,e=this.state.cate;t({type:"category/getInfo",payload:{params:{id:e}}}).then(t=>{t&&this.setState({info:t.data||{}})})}),this.listQuery=(t=>{var e=this.state.query,a=r()({},e,t);this.setState({query:a},()=>{this.initData({})})}),this.toggleList=(t=>{this.setState({list:t})});var e=t.location.query,a=t.match;this.state={type:a.params.type,cate:a.params.cate,query:{sortBy:e.sortBy||"updatedAt",sortOrder:e.sortOrder||-1,size:e.size?parseInt(e.size):20,page:e.page?parseInt(e.page):1},list:!!e.list&&"true"===e.list,info:{}}}static getDerivedStateFromProps(t,e){return t.match.params.cate!==e.cate?{cate:t.match.params.cate}:null}componentDidUpdate(t,e){e.cate!==this.state.cate&&(this.initData({}),this.initCategory())}componentDidMount(){this.initData({}),this.initCategory()}render(){var t=this.state,e=t.query,a=t.list,s=t.cate,n=t.info,o=void 0===n?{}:n,l=this.props,u=l.comic,y=l.loading,v=u[s]&&u[s].list||[],E=u[s]&&u[s].total||0;return c.a.createElement("div",null,c.a.createElement("div",{className:"container"},c.a.createElement(p["a"],{img:o.cover,span:o.name}),c.a.createElement(i["a"],{bordered:!1,style:{marginBottom:"20px"},loading:y&&0===E},c.a.createElement(m["a"],{value:e,onChange:this.listQuery},c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:a?"":"active",onClick:()=>this.toggleList(!1)},c.a.createElement(g["a"],{type:"icon-settings-filter"})),c.a.createElement("span",{className:a?"active":"",onClick:()=>this.toggleList(!0)},c.a.createElement(g["a"],{type:"icon-apps"})))),a?c.a.createElement(d["b"],{list:v}):c.a.createElement(d["a"],{list:v}),c.a.createElement(h["a"],{value:r()({},e,{total:E}),onChange:this.listQuery}))))}};v=Object(n["a"])([Object(l["connect"])(t=>{var e=t.comic,a=t.loading;return{comic:e,loading:a.models.comic}})],v),e["default"]=v}}]);