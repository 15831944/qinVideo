(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"79Re":function(e,n,t){"use strict";t.r(n);t("T2oS");var a=t("W9HT"),i=t("mrSG"),r=t("q1tI"),s=t.n(r),c=t("MuoO"),o=(t("pC0b"),t("GzdX")),l=(t("/zsF"),t("PArb")),m=t("qIgq"),d=t.n(m),p=t("fFZ8"),u=t.n(p),f=t("vOnD"),g=t("LLXN"),h=t("wd/R"),v=t.n(h),b=t("TSYQ"),E=t.n(b),x=t("YO1i"),w=t("Gwa3"),y=t("EZ0T"),k=t("DNCa"),N=(t("IzEo"),t("bx4M")),j=t("d6i3"),O=t.n(j),M=t("1l/V"),z=t.n(M),S=t("/88p"),C=t("zz3R"),D=function(){var e=z()(O.a.mark(function e(n,t,a){var i;return O.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a(!0),e.next=3,C["a"].getComicRelative({params:{id:n}});case 3:i=e.sent,t(i.data),a(!1);case 6:case"end":return e.stop()}},e)}));return function(n,t,a){return e.apply(this,arguments)}}(),L=e=>{var n=e.target,t=Object(r["useState"])([]),a=d()(t,2),i=a[0],c=a[1],o=Object(r["useState"])(!0),l=d()(o,2),m=l[0],p=l[1],u=Object(r["useState"])(12),f=d()(u,2),g=f[0],h=f[1];return Object(r["useEffect"])(()=>{D(n,c,p)},[n]),Object(r["useEffect"])(()=>{var e=window.outerWidth,n=e>=1600?16:12;h(n)}),s.a.createElement(N["a"],{bordered:!1,loading:m,style:{borderRadius:"4px"}},s.a.createElement(S["b"],{list:i.slice(0,g)}))},A=L,I=t("qki9");function R(){var e=u()(["\n  min-height: 100vh;\n  padding-bottom: 1px;\n  .head {\n    width: 100%;\n    height: 440px;\n    position: relative;\n    overflow: hidden;\n    z-index: 9;\n\n    .bg {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      filter: blur(15px);\n      transform: scale(1.2);\n      background-size: cover;\n      background-position: center;\n      z-index: -1;\n\n      &:after {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        left: 0;\n        top: 0;\n        background-color: rgba(0, 0, 0, 0.3);\n      }\n    }\n\n    .info {\n      height: 320px;\n      margin-top: 80px;\n      display: grid;\n      grid-template-columns: 224px 1fr;\n      grid-gap: 30px;\n\n      .cover {\n        background-size: cover;\n        border: 3px solid #fff;\n        border-radius: 5px;\n        background-position: center;\n      }\n\n      .main {\n        display: grid;\n        grid-template-columns: 1fr;\n        grid-template-rows: 40px 50px 20px 1fr 50px;\n        grid-gap: 15px;\n        overflow: hidden;\n\n        .title {\n          display: flex;\n          justify-content: flex-start;\n          align-items: center;\n          overflow: hidden;\n          white-space: pre;\n\n          span:nth-child(1) {\n            color: #fff;\n            font-weight: bold;\n            font-size: 1.6rem;\n            margin-right: 30px;\n          }\n\n          span.tags {\n            color: white;\n            padding: 0.1rem 0.5rem;\n            border: 1px solid #fff;\n            border-radius: 3px;\n            margin-right: 1rem;\n            font-size: 0.8em;\n            opacity: 0.9;\n          }\n        }\n\n        .count {\n          height: 100%;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n\n          .number {\n            height: 100%;\n            display: flex;\n            justify-content: flex-start;\n            align-items: center;\n\n            .list {\n              height: 100%;\n              display: flex;\n              flex-direction: column;\n              justify-content: space-between;\n              align-items: flex-start;\n              color: white;\n              font-weight: 200;\n              padding: 0 10px;\n            }\n\n            .ant-divider.ant-divider-vertical {\n              height: 100%;\n            }\n          }\n\n          .star {\n            display: flex;\n            justify-content: flex-end;\n            align-items: center;\n            font-weight: 300;\n\n            .rate {\n              font-size: 48px;\n              color: #ffa726;\n              margin-right: 16px;\n            }\n\n            .rateStar {\n              display: flex;\n              flex-direction: column;\n              justify-content: center;\n              align-items: flex-start;\n              color: white;\n\n              .ant-rate-star-full svg {\n                color: #ffa726;\n              }\n\n              span {\n                font-size: 0.9em;\n                opacity: 0.9;\n              }\n            }\n          }\n        }\n\n        .information {\n          color: white;\n\n          span {\n            margin-right: 30px;\n          }\n        }\n\n        .introduce {\n          font-weight: 200;\n          color: white;\n          overflow: hidden;\n          line-height: 20px;\n        }\n\n        .button {\n          display: flex;\n          justify-content: flex-start;\n          align-items: flex-end;\n\n          div {\n            height: 46px;\n            padding: 0 25px;\n            color: #fff;\n            font-size: 1.1rem;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            cursor: pointer;\n            font-weight: 300;\n            border-radius: 5px;\n\n            &:hover {\n              opacity: 0.8;\n            }\n\n            i {\n              font-size: 1.5em;\n              margin-right: 10px;\n            }\n          }\n\n          .like {\n            background-color: #f36392;\n\n            &.active i {\n              color: #ffa726;\n            }\n          }\n\n          .download {\n            margin-left: 30px;\n            background-color: rgb(24, 144, 255);\n          }\n        }\n      }\n    }\n  }\n\n  .tabs {\n    background-color: white;\n    height: 50px;\n\n    span {\n      display: inline-block;\n      line-height: 47px;\n      border-bottom: solid 3px transparent;\n      padding: 0 5px;\n      margin-right: 25px;\n      font-size: 1.1em;\n      cursor: pointer;\n\n      &.active {\n        border-bottom-color: ",";\n      }\n    }\n  }\n\n  .content {\n    margin: 20px 0;\n\n    .sec {\n      display: none;\n\n      &.active {\n        display: block;\n      }\n    }\n  }\n"]);return R=function(){return e},e}var T=f["a"].div(R(),e=>e.color),Y=e=>{window.open(e)},P=e=>{var n=e.info,t=e.userAction,a=Object(r["useContext"])(w["a"]),i=Object(r["useMemo"])(()=>a,[a]),c=Object(r["useState"])(0),m=d()(c,2),p=m[0],u=m[1];return s.a.createElement(T,{color:i},s.a.createElement("div",{className:"head"},s.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(n.coverVertical,")")}}),s.a.createElement("div",{className:"container info"},s.a.createElement("div",{className:"cover",style:{backgroundImage:"url(".concat(n.coverVertical,")")}}),s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"title"},s.a.createElement("span",null,n.title),n.tag.map(e=>s.a.createElement("span",{className:"tags",key:e.name},e.name))),s.a.createElement("div",{className:"count"},s.a.createElement("div",{className:"number"},s.a.createElement("div",{className:"list",style:{paddingLeft:"0"}},s.a.createElement("span",null,Object(g["formatMessage"])({id:"animate.info.play"}),":"),s.a.createElement("span",null,n.countPlay)),s.a.createElement(l["a"],{type:"vertical"}),s.a.createElement("div",{className:"list"},s.a.createElement("span",null,Object(g["formatMessage"])({id:"animate.info.like"}),":"),s.a.createElement("span",null,n.countLike)),s.a.createElement(l["a"],{type:"vertical"}),s.a.createElement("div",{className:"list"},s.a.createElement("span",null,Object(g["formatMessage"])({id:"animate.info.comment"}),":"),s.a.createElement("span",null,n.countComment))),s.a.createElement("div",{className:"star"},s.a.createElement("span",{className:"rate"},n.countStar),s.a.createElement("div",{className:"rateStar"},s.a.createElement(o["a"],{disabled:!0,allowHalf:!0,defaultValue:n.countStar/2}),s.a.createElement("span",null,n.countRate,Object(g["formatMessage"])({id:"animate.info.rate.count"}))))),s.a.createElement("div",{className:"information"},s.a.createElement("span",null,v()(n.firstPlay).format("YYYY-MM-DD")," ",Object(g["formatMessage"])({id:"animate.info.firstPlay"})),s.a.createElement("span",null,n.countEposide," ",Object(g["formatMessage"])({id:"animate.info.eposideCount"})),s.a.createElement("span",null,Object(g["formatMessage"])({id:n.isUpdate?"animate.info.isUpdate.true":"animate.info.isUpdate.false"}))),s.a.createElement("div",{className:"introduce"},s.a.createElement("span",null,Object(g["formatMessage"])({id:"animate.info.introduce"}),": ",n.introduce)),s.a.createElement("div",{className:"button"},s.a.createElement(I["a"],null,s.a.createElement("div",{className:E()("like",{active:n.isLiked}),onClick:t},s.a.createElement(x["a"],{type:"icon-yizhuifan"}),s.a.createElement("span",null,Object(g["formatMessage"])({id:"animate.info.btn.like"})))),n.downTitle&&s.a.createElement("div",{className:"download",onClick:()=>{Y(n.downLink)}},s.a.createElement(x["a"],{type:"icon-ic_cloud_download_"}),s.a.createElement("span",null,n.downTitle)))))),s.a.createElement("div",{className:"tabs"},s.a.createElement("div",{className:"container"},s.a.createElement("span",{className:0===p?"active":"",onClick:()=>{u(0)}},Object(g["formatMessage"])({id:"animate.tabs.eposide"})),s.a.createElement("span",{className:1===p?"active":"",onClick:()=>{u(1)}},Object(g["formatMessage"])({id:"animate.tabs.comment"})," (",n.countComment,")"),s.a.createElement("span",{className:2===p?"active":"",onClick:()=>{u(2)}},Object(g["formatMessage"])({id:"animate.tabs.relative"})))),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:0===p?"sec active":"sec"},s.a.createElement(y["b"],{season:n.seasons,eposide:n.eposides,slug:n.slug,cover:n.coverVertical})),s.a.createElement("div",{className:1===p?"sec active":"sec"},s.a.createElement(k["a"],{target:n._id,onModel:"Animate",api:C["a"]})),s.a.createElement("div",{className:2===p?"sec active":"sec"},n.id&&s.a.createElement(A,{target:n.id})))))},V=P,_=class extends r["Component"]{constructor(e){super(e),this.initData=(()=>{var e=this.state.slug,n=this.props.dispatch;n({type:"comic/getInfo",payload:{params:{slug:e}}}).then(e=>{this.setState({info:e.data})})}),this.userAction=(()=>{var e=this.state.info;C["a"].userAction({data:{type:"Comic",target:e._id}}).then(n=>{n&&(e.isLiked=!e.isLiked,this.setState({info:e}))})}),this.state={slug:e.match.params.slug,info:{area:[],kind:[],year:[],tag:[],countRate:0,countStar:0,author:[],seasons:[],eposides:[]}}}static getDerivedStateFromProps(e,n){return e.match.params.slug!==n.slug?{slug:e.match.params.slug}:null}componentDidMount(){this.initData()}componentDidUpdate(e,n){n.slug!==this.state.slug&&this.initData()}render(){var e=this.props.loading,n=this.state.info;return s.a.createElement(s.a.Fragment,null,s.a.createElement(a["a"],{spinning:e,size:"large"},s.a.createElement(V,{info:n,userAction:this.userAction})))}};_=Object(i["a"])([Object(c["connect"])(e=>{var n=e.auth,t=e.comic,a=e.loading;return{auth:n,comic:t,loading:a.effects["comic/getInfo"]}})],_);n["default"]=_}}]);