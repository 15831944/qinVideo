(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{Mjj1:function(e,t,a){"use strict";a.r(t);a("IzEo");var o,n,r,c=a("bx4M"),i=(a("g9YV"),a("wCAj")),s=(a("14J3"),a("BMrR")),d=(a("jCWc"),a("kPKH")),l=(a("+L6B"),a("2/Rp")),u=a("p0pE"),m=a.n(u),f=(a("2qtc"),a("kLXV")),g=a("2Taf"),h=a.n(g),p=a("vZ4D"),y=a.n(p),b=a("l4Ni"),M=a.n(b),j=a("ujKo"),O=a.n(j),w=a("rlhR"),v=a.n(w),k=a("MhPg"),R=a.n(k),q=(a("5NDa"),a("5rEg")),I=a("q1tI"),x=a.n(I),E=a("MuoO"),C=a("LLXN"),D=a("wd/R"),K=a.n(D),S=a("ZeOv"),z=q["a"].Search,B=(o=Object(E["connect"])(function(e){var t=e.cloud,a=e.loading;return{cloud:t,loading:a.effects["cloud/queryRecord"]}}),o((r=function(e){function t(e){var a;h()(this,t),a=M()(this,O()(t).call(this,e)),a.editRef=x.a.createRef(null),a.deleteMany=function(){var e=a.state.selectedRowKeys;a.destroy(e)},a.deleteAll=function(){a.destroy([])},a.destroy=function(e){var t=a.props.dispatch;f["a"].confirm({title:Object(C["formatMessage"])({id:"cloud.history.delete.title"}),content:Object(C["formatMessage"])({id:"common.delete.tips"}),okText:Object(C["formatMessage"])({id:"common.confirm"}),cancelText:Object(C["formatMessage"])({id:"common.cancel"}),onOk:function(){return t({type:"cloud/deleteRecordBatch",payload:{data:{ids:e}}}).then(function(e){e&&(a.initData(),a.setState({selectedRowKeys:[]}))})}})},a.showInfo=function(e){f["a"].error({title:Object(C["formatMessage"])({id:"cloud.history.content.title"}),content:e.length>0?e.join(","):Object(C["formatMessage"])({id:"common.nodata"})})},a.onSearch=function(e){a.query.title=e,a.query.page=1,a.initData()},a.onChangeTable=function(e,t,o){var n,r,c=e.current,i=e.pageSize;o.order&&(n="descend"===o.order?-1:1,r=o.field),a.query=m()({},a.query,{size:i,page:c,sortBy:r,sortOrder:n}),a.initData()},a.initData=function(){var e=v()(a),t=e.query,o=a.props.dispatch;o({type:"cloud/queryRecord",payload:{query:t}});var n=a.props,r=n.location.pathname,c=n.history;c.push({pathname:r,state:a.query})};var o=e.location.state,n=void 0===o?{}:o;return a.state={selectedRowKeys:[]},a.query={title:n.title,size:n.size?n.size:10,page:n.page?n.page:1,sortBy:n.sortBy,sortOrder:n.sortOrder,type:n.type},a}return R()(t,e),y()(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state.selectedRowKeys,a=this.props,o=a.cloud,n=o.recordList,r=o.recordTotal,u=a.loading,m=[{title:Object(C["formatMessage"])({id:"cloud.history.id"}),dataIndex:"_id",align:"center",sorter:!0},{title:Object(C["formatMessage"])({id:"cloud.source.source"}),dataIndex:"source.source",align:"center",render:function(e){return e||Object(C["formatMessage"])({id:"common.nodata"})}},{title:Object(C["formatMessage"])({id:"cloud.history.total"}),dataIndex:"total",key:"total",align:"center"},{title:Object(C["formatMessage"])({id:"cloud.history.success"}),dataIndex:"success",align:"center"},{title:Object(C["formatMessage"])({id:"cloud.history.fail"}),dataIndex:"fail",align:"center"},{title:Object(C["formatMessage"])({id:"cloud.source.mode"}),dataIndex:"source.mode",align:"center",render:function(e){return e?Object(C["formatMessage"])({id:"cloud.source.mode.".concat(e)}):Object(C["formatMessage"])({id:"common.nodata"})}},{title:Object(C["formatMessage"])({id:"cloud.history.kind"}),dataIndex:"kind",align:"center",filters:Object.values(S["e"]),filterMultiple:!1,render:function(e){return e?Object(C["formatMessage"])({id:"cloud.history.kind.".concat(e)}):Object(C["formatMessage"])({id:"common.nodata"})}},{title:Object(C["formatMessage"])({id:"cloud.history.type"}),dataIndex:"type",align:"center",filters:Object.values(S["c"]),filterMultiple:!1,render:function(e){return e?Object(C["formatMessage"])({id:"cloud.history.type.".concat(e)}):Object(C["formatMessage"])({id:"common.nodata"})}},{title:Object(C["formatMessage"])({id:"shop.createdAt"}),dataIndex:"createdAt",sorter:!0,align:"center",render:function(e){return K()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:Object(C["formatMessage"])({id:"shop.option"}),key:"action",dataIndex:"content",align:"center",render:function(t){return x.a.createElement("a",{onClick:function(){return e.showInfo(t)}},Object(C["formatMessage"])({id:"cloud.history.content.option"}))}}],f={selectedRowKeys:t,onChange:function(t){e.setState({selectedRowKeys:t})}},g=Object(S["h"])(this.query.page,this.query.size,r);return x.a.createElement(c["a"],{className:"tableList",bordered:!1},x.a.createElement(s["a"],{className:"head"},x.a.createElement(d["a"],{span:16},x.a.createElement(l["a"],{type:"danger",onClick:this.deleteAll},Object(C["formatMessage"])({id:"animate.option.batch.all.delete"})),t.length>0&&x.a.createElement(l["a"],{onClick:this.deleteMany},Object(C["formatMessage"])({id:"animate.option.batch.some.delete"}))),x.a.createElement(d["a"],{span:8},x.a.createElement(z,{placeholder:Object(C["formatMessage"])({id:"shop.search"}),onSearch:this.onSearch,enterButton:!0}))),x.a.createElement(s["a"],null,x.a.createElement(i["a"],{loading:u,rowKey:"_id",rowSelection:f,columns:m,onChange:this.onChangeTable,dataSource:n,pagination:g})))}}]),t}(I["Component"]),n=r))||n);t["default"]=B}}]);