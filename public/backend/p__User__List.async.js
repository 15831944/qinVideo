(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{CNVm:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,s,l=a("bx4M"),c=(a("g9YV"),a("wCAj")),o=(a("14J3"),a("BMrR")),i=(a("jCWc"),a("kPKH")),u=(a("qVdP"),a("jsC+")),d=(a("Pwec"),a("CtXQ")),m=(a("+L6B"),a("2/Rp")),f=(a("lUTK"),a("BvKs")),p=(a("/zsF"),a("PArb")),b=(a("Awhp"),a("KrTs")),h=(a("+BJd"),a("mr32")),g=(a("Telt"),a("Tckk")),E=(a("2qtc"),a("kLXV")),v=a("2Taf"),y=a.n(v),O=a("vZ4D"),M=a.n(O),j=a("l4Ni"),k=a.n(j),w=a("ujKo"),q=a.n(w),x=a("rlhR"),I=a.n(x),C=a("MhPg"),S=a.n(C),D=(a("5NDa"),a("5rEg")),R=a("q1tI"),K=a.n(R),U=a("MuoO"),T=a("7DNP"),B=a("LLXN"),V=a("wd/R"),N=a.n(V),z=(a("y8nQ"),a("Vl3Y")),A=a("jehZ"),P=a.n(A),F=(a("giR+"),a("fyUT")),Y=(a("OaEy"),a("2fM7")),J=a("p0pE"),L=a.n(J),X=a("zX7x"),H=function(e){function t(){var e,a;y()(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return a=k()(this,(e=q()(t)).call.apply(e,[this].concat(n))),a.state={},a.handleSubmit=function(e){return function(){var t=a.props,r=t.modal,n=t.form;n.validateFields(function(t,a){t||(r.confirm(L()({},a,{nameData:e})),n.resetFields())})}},a.handleCancel=function(){var e=a.props,t=e.modal,r=e.form;t.cancel(),r.resetFields()},a}return S()(t,e),M()(t,[{key:"render",value:function(){var e=Y["a"].Option,t=this.props.form.getFieldDecorator,a=this.props,r=a.show,n=a.data,s=a.modal,l={labelCol:{span:4},wrapperCol:{span:18}},c=n||{},o=c.name,i=c.status,u=c.email,d=c.level,m=c.score,f=c.avatar;return K.a.createElement(E["a"],{title:"\u5feb\u901f\u7f16\u8f91",visible:r,maskClosable:!1,forceRender:"true",onOk:this.handleSubmit(o),onCancel:this.handleCancel},K.a.createElement(z["a"],{onSubmit:s.submit},K.a.createElement(z["a"].Item,P()({},l,{label:"\u7b49\u7ea7"}),t("level",{initialValue:d})(K.a.createElement(F["a"],null))),K.a.createElement(z["a"].Item,P()({},l,{label:"\u79ef\u5206"}),t("score",{initialValue:m})(K.a.createElement(F["a"],null))),K.a.createElement(z["a"].Item,P()({},l,{label:"\u5934\u50cf"}),t("avatar",{initialValue:f})(K.a.createElement(X["a"],{width:120,height:120}))),n&&K.a.createElement(z["a"].Item,P()({},l,{label:"\u540d\u5b57"}),t("name",{initialValue:o,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u540d\u5b57"}]})(K.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57"}))),n&&K.a.createElement(z["a"].Item,P()({},l,{label:"\u90ae\u7bb1"}),t("email",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u90ae\u7bb1"}]})(K.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),K.a.createElement(z["a"].Item,P()({},l,{label:"\u72b6\u6001"}),t("status",{initialValue:i||"inactive",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001"}]})(K.a.createElement(Y["a"],{placeholder:"\u8bf7\u9009\u62e9\u89c6\u9891\u72b6\u6001"},K.a.createElement(e,{value:"inactive"},"\u5f85\u9a8c\u8bc1"),K.a.createElement(e,{value:"active"},"\u5df2\u6fc0\u6d3b"),K.a.createElement(e,{value:"unused"},"\u5f85\u5220\u9664"))))))}}]),t}(R["PureComponent"]),Q=z["a"].create()(H),Z=D["a"].Search,W=(r=Object(U["connect"])(function(e){var t=e.user,a=e.loading;return{user:t,loading:a.models.user}}),r((s=function(e){function t(){var e,a;y()(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return a=k()(this,(e=q()(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[],quickEditStatus:!1,quickEditData:null},a.query={name:null,size:null,page:null,sort:null,email:null,status:null},a.list={quickEdit:function(e){return function(){a.setState({quickEditData:{name:e.name,email:e.email,status:e.status,level:e.level,score:e.score,avatar:e.avatar}}),a.modal.show()}},fullEdit:function(e){return function(){var t=a.props.dispatch;t(T["routerRedux"].push("/user/slug/".concat(e)))}},fulldelete:function(e){return function(){var t=a.props.dispatch;t({type:"user/deleteUser",payload:{params:{slug:e}}})}}},a.table={addNew:function(){var e=a.props.dispatch;e(T["routerRedux"].push("/user/create"))},batchEdit:function(){a.setState({quickEditStatus:!0})},batchDelete:function(){E["a"].confirm({title:Object(B["formatMessage"])({id:"user.list.delete.user"}),content:Object(B["formatMessage"])({id:"user.list.delete.user.tips"}),okText:Object(B["formatMessage"])({id:"common.confirm"}),cancelText:Object(B["formatMessage"])({id:"common.cancel"}),onOk:function(){a.deleteBatch(!1),a.setState({selectedRowKeys:[]})}})},moreOption:function(e){switch(e.key){case"edit":a.table.allEdit();break;case"delete":a.table.allDelete();break;default:break}},allEdit:function(){a.setState({quickEditStatus:!0})},allDelete:function(){E["a"].confirm({title:Object(B["formatMessage"])({id:"user.list.delete.user"}),content:Object(B["formatMessage"])({id:"user.list.delete.user.all.tips"}),okText:Object(B["formatMessage"])({id:"common.confirm"}),cancelText:Object(B["formatMessage"])({id:"common.cancel"}),onOk:function(){a.deleteBatch(!0),a.setState({selectedRowKeys:[]})}})}},a.modal={show:function(){a.setState({quickEditStatus:!0})},cancel:function(){a.setState({quickEditStatus:!1,quickEditData:null})},confirm:function(e){var t=e.name,r=e.status,n=e.email,s=e.level,l=e.score,c=e.avatar,o=e.nameData,i=a.props.dispatch,u=a.state.selectedRowKeys;a.modal.cancel(),t?i({type:"user/putUserInfo",payload:{params:{slug:o},data:{status:r,name:t,email:n,level:s,score:l,avatar:c}}}):u.length>0?(i({type:"user/putUserBatch",payload:{data:{type:"batch",list:u,data:{status:r,level:s,score:l,avatar:c}}},addon:a.query}),a.setState({selectedRowKeys:[]})):i({type:"user/putUserBatch",payload:{data:{type:"all",data:{status:r,avatar:c,level:s,score:l}}},addon:a.query})}},a.deleteBatch=function(e){var t=a.props.dispatch,r=a.state.selectedRowKeys;t(e?{type:"user/deleteUserBatch",payload:{data:{type:"all"}},addon:a.query}:{type:"user/deleteUserBatch",payload:{data:{type:"batch",list:r}},addon:a.query})},a.onSearchUser=function(e){a.query.name=e,a.queryUser()},a.onChangeTable=function(e,t,r){var n=e.current,s=e.pageSize,l=t.status?t.status[0]:null,c=null;if(r.order){var o="descend"===r.order?"-":"",i=r.field;c="".concat(o).concat(i)}a.query={size:s,page:n,sort:c,status:l},a.queryUser()},a.queryUser=function(){var e=I()(a),t=e.query,r=a.props.dispatch;r({type:"user/queryUser",payload:{query:t}})},a}return S()(t,e),M()(t,[{key:"componentDidMount",value:function(){this.queryUser()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=t.quickEditStatus,n=t.quickEditData,s=this.props,E=s.user,v=E.list,y=E.total,O=s.loading,M={inactive:{text:Object(B["formatMessage"])({id:"user.inactive"}),badge:"processing",value:"inactive"},active:{text:Object(B["formatMessage"])({id:"user.active"}),badge:"success",value:"active"},unused:{text:Object(B["formatMessage"])({id:"user.unused"}),badge:"error",value:"unused"}},j=[{title:Object(B["formatMessage"])({id:"user.avatar"}),dataIndex:"avatar",render:function(e){return K.a.createElement(g["a"],{size:64,shape:"square",icon:"user",src:e})}},{title:Object(B["formatMessage"])({id:"user.name"}),dataIndex:"name",key:"name",sorter:!0,render:function(t,a){return K.a.createElement("span",null,K.a.createElement("a",{onClick:e.list.fullEdit(a.name)},t))}},{title:Object(B["formatMessage"])({id:"user.email"}),dataIndex:"email",sorter:!0},{title:Object(B["formatMessage"])({id:"user.level"}),dataIndex:"level",sorter:!0,render:function(e){var t;return t=0===e?null:e<11?"#2db7f5":e<21?"#87d068":e<31?"#108ee9":e<41?"#33cc33":e<51?"#9966ff":e<61?"#993399":e<71?"#ff9966":e<81?"#669999":e<91?"#00cc44":e<100?"#9900cc":"#f50",K.a.createElement(h["a"],{color:t},e)}},{title:Object(B["formatMessage"])({id:"user.score"}),dataIndex:"score",sorter:!0},{title:Object(B["formatMessage"])({id:"user.money"}),dataIndex:"money",sorter:!0},{title:Object(B["formatMessage"])({id:"user.expired"}),dataIndex:"expired",sorter:!0,render:function(e){return"".concat((e/3600/24).toFixed(2),"\u5929")}},{title:Object(B["formatMessage"])({id:"user.count.post"}),dataIndex:"count.post",sorter:!0},{title:Object(B["formatMessage"])({id:"user.count.animate"}),dataIndex:"count.animate",sorter:!0},{title:Object(B["formatMessage"])({id:"user.count.comic"}),dataIndex:"count.comic",sorter:!0},{title:Object(B["formatMessage"])({id:"user.count.comment"}),dataIndex:"count.comment",sorter:!0},{title:Object(B["formatMessage"])({id:"user.count.report"}),dataIndex:"count.report",sorter:!0},{title:Object(B["formatMessage"])({id:"user.count.order"}),dataIndex:"count.order",sorter:!0},{title:Object(B["formatMessage"])({id:"user.status"}),dataIndex:"status",filters:Object.values(M),filterMultiple:!1,render:function(e){return K.a.createElement(b["a"],{status:M[e].badge,text:M[e].text})}},{title:Object(B["formatMessage"])({id:"user.createdAt"}),dataIndex:"createdAt",sorter:!0,width:120,align:"center",render:function(e){return N()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:Object(B["formatMessage"])({id:"user.option"}),key:"action",dataIndex:"name",render:function(t,a){return K.a.createElement("span",null,K.a.createElement("a",{onClick:e.list.quickEdit(a)},Object(B["formatMessage"])({id:"user.option.quick.edit"})),K.a.createElement(p["a"],{type:"vertical"}),K.a.createElement("a",{onClick:e.list.fullEdit(t)},Object(B["formatMessage"])({id:"user.option.full.edit"})),K.a.createElement(p["a"],{type:"vertical"}),K.a.createElement("a",{onClick:e.list.fulldelete(t)},Object(B["formatMessage"])({id:"user.option.full.delete"})))}}],k=K.a.createElement(f["b"],{onClick:this.table.moreOption},K.a.createElement(f["b"].Item,{key:"edit"},Object(B["formatMessage"])({id:"user.option.batch.all.edit"})),K.a.createElement(f["b"].Item,{key:"delete"},Object(B["formatMessage"])({id:"user.option.batch.all.delete"}))),w={selectedRowKeys:a,onChange:function(t){e.setState({selectedRowKeys:t})}},q={showSizeChanger:!0,showQuickJumper:!0,total:y,showTotal:function(e){return"".concat(Object(B["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(B["formatMessage"])({id:"common.all.item"}))}};return K.a.createElement(l["a"],{className:"tableList",bordered:!1},K.a.createElement(o["a"],{className:"head"},K.a.createElement(i["a"],{span:16},K.a.createElement(m["a"],{icon:"plus",type:"primary",onClick:this.table.addNew},Object(B["formatMessage"])({id:"common.add.new"})),a.length>0&&K.a.createElement("span",null,K.a.createElement(m["a"],{onClick:this.table.batchEdit},Object(B["formatMessage"])({id:"user.option.batch.some.edit"})),K.a.createElement(m["a"],{onClick:this.table.batchDelete},Object(B["formatMessage"])({id:"user.option.batch.some.delete"}))),K.a.createElement(u["a"],{overlay:k},K.a.createElement(m["a"],null,Object(B["formatMessage"])({id:"common.more.option"})," ",K.a.createElement(d["a"],{type:"down"})))),K.a.createElement(i["a"],{span:8},K.a.createElement(Z,{placeholder:Object(B["formatMessage"])({id:"user.search"}),onSearch:this.onSearchUser,enterButton:!0}))),K.a.createElement(o["a"],null,K.a.createElement(c["a"],{className:"longTable",loading:O,rowKey:"name",rowSelection:w,columns:j,onChange:this.onChangeTable,dataSource:v,pagination:q})),K.a.createElement(Q,{show:r,data:n,modal:this.modal}))}}]),t}(R["Component"]),n=s))||n);t["default"]=W}}]);