(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"4kZa":function(e,t,a){"use strict";a.r(t);a("IzEo");var o,n,i,r=a("bx4M"),s=(a("g9YV"),a("wCAj")),c=(a("14J3"),a("BMrR")),l=(a("jCWc"),a("kPKH")),d=(a("+L6B"),a("2/Rp")),u=(a("Telt"),a("Tckk")),m=(a("2qtc"),a("kLXV")),f=a("p0pE"),p=a.n(f),g=(a("miYZ"),a("tsqr")),y=a("2Taf"),h=a.n(y),b=a("vZ4D"),M=a.n(b),O=a("l4Ni"),j=a.n(O),v=a("ujKo"),w=a.n(v),k=a("rlhR"),E=a.n(k),C=a("MhPg"),x=a.n(C),S=(a("5NDa"),a("5rEg")),I=a("q1tI"),q=a.n(I),R=a("MuoO"),D=a("LLXN"),K=a("wd/R"),T=a.n(K),B=a("xa77"),z=a("ZeOv"),A=S["a"].Search,L=(o=Object(R["connect"])(function(e){var t=e.cloud,a=e.loading;return{cloud:t,loading:a.effects["cloud/queryCloud"]}}),o((i=function(e){function t(e){var a;h()(this,t),a=j()(this,w()(t).call(this,e)),a.import=function(e){return function(){var t=a.props.dispatch,o=[];if(e)o=[e];else{var n=a.state.selectedRowKeys;o=n}g["a"].loading(Object(D["formatMessage"])({id:"cloud.list.save.tips"}),1e7),t({type:"cloud/cloudSave",payload:{data:{ids:o}}}).then(function(e){g["a"].destroy(),e&&(g["a"].success(Object(D["formatMessage"])({id:"tools.list.cat.result"},{total:e.data.total,success:e.data.success,fail:e.data.fail})),a.setState({selectedRowKeys:[]}),a.initData())})}},a.importAll=function(){var e=a.props.dispatch;g["a"].loading(Object(D["formatMessage"])({id:"cloud.list.save.tips"}),1e8),e({type:"cloud/cloudSave",payload:{data:{ids:[]}}}).then(function(e){g["a"].destroy(),e&&g["a"].success(Object(D["formatMessage"])({id:"cloud.history.save.start"}))})},a.showInfo=function(e){return function(){a.setState({info:e,visible:!0})}},a.hideModal=function(){a.setState({visible:!1})},a.onSearch=function(e){a.query.title=e,a.initData()},a.onChangeTable=function(e,t,o){var n,i,r=e.current,s=e.pageSize,c=t.type?t.type[0]:null;o.order&&(n="descend"===o.order?-1:1,i=o.field),a.query=p()({},a.query,{size:s,page:r,sortOrder:n,sortBy:i,type:c}),a.initData()},a.deleteMany=function(){var e=a.state.selectedRowKeys;a.destroy(e)},a.deleteAll=function(){a.destroy([])},a.deleteOne=function(e){return function(){a.destroy([e])}},a.destroy=function(e){var t=a.props.dispatch;m["a"].confirm({title:Object(D["formatMessage"])({id:"cloud.list.delete.title"}),content:Object(D["formatMessage"])({id:"common.delete.tips"}),okText:Object(D["formatMessage"])({id:"common.confirm"}),cancelText:Object(D["formatMessage"])({id:"common.cancel"}),onOk:function(){return t({type:"cloud/deleteCloudBatch",payload:{data:{ids:e}}}).then(function(e){e&&(a.initData(),a.setState({selectedRowKeys:[]}))})}})},a.initData=function(){var e=E()(a),t=e.query,o=a.props.dispatch;o({type:"cloud/queryCloud",payload:{query:t}})};var o=e.location.state,n=void 0===o?{}:o;return a.state={selectedRowKeys:[],info:{},visible:!1},a.query={title:n.title,size:n.size||10,page:n.page||1,sortBy:n.sortBy,sortOrder:n.sortOrder,type:n.type},a}return x()(t,e),M()(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,o=t.info,n=t.visible,i=this.props,f=i.cloud,p=f.cloudList,g=f.cloudTotal,y=i.loading,h=[{title:Object(D["formatMessage"])({id:"cloud.list.title"}),dataIndex:"title",key:"title",sorter:!0,render:function(t,a){return q.a.createElement("a",{onClick:e.showInfo(a)},t)}},{title:Object(D["formatMessage"])({id:"cloud.list.coverVertical"}),dataIndex:"coverVertical",align:"center",render:function(e){return q.a.createElement(u["a"],{src:e,shape:"square"})}},{title:Object(D["formatMessage"])({id:"cloud.list.slug"}),dataIndex:"slug",align:"center",sorter:!0},{title:Object(D["formatMessage"])({id:"cloud.list.type"}),dataIndex:"type",align:"center",filters:Object.values(z["e"]),filterMultiple:!1,render:function(e){return Object(D["formatMessage"])({id:"cloud.list.type.".concat(e)})}},{title:Object(D["formatMessage"])({id:"cloud.list.eposide.count"}),dataIndex:"eposide",align:"center",render:function(e){return e.length}},{title:Object(D["formatMessage"])({id:"cloud.list.source"}),dataIndex:"source",align:"center",sorter:!0},{title:Object(D["formatMessage"])({id:"cloud.list.area"}),dataIndex:"area",align:"center",render:function(e){return e.join(",")}},{title:Object(D["formatMessage"])({id:"cloud.list.year"}),dataIndex:"year",align:"center",render:function(e){return e.join(",")}},{title:Object(D["formatMessage"])({id:"cloud.list.updatedTime"}),dataIndex:"updatedAt",sorter:!0,align:"center",render:function(e){return T()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:Object(D["formatMessage"])({id:"cloud.list.option"}),key:"action",dataIndex:"_id",align:"center",render:function(t,a){return[a.exist?q.a.createElement(d["a"],{onClick:e.import(t)},Object(D["formatMessage"])({id:"cloud.list.option.update"})):q.a.createElement(d["a"],{type:"primary",onClick:e.import(t)},Object(D["formatMessage"])({id:"cloud.list.option.import"}))]}}],b={selectedRowKeys:a,onChange:function(t){e.setState({selectedRowKeys:t})}},M={showSizeChanger:!0,showQuickJumper:!0,total:g,showTotal:function(e){return"".concat(Object(D["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(D["formatMessage"])({id:"common.all.item"}))}};return q.a.createElement(r["a"],{className:"tableList",bordered:!1},q.a.createElement(c["a"],{className:"head"},q.a.createElement(l["a"],{span:16},q.a.createElement(d["a"],{type:"primary",onClick:this.importAll},Object(D["formatMessage"])({id:"cloud.table.import.all"})),a.length>0&&q.a.createElement(q.a.Fragment,null,q.a.createElement(d["a"],{onClick:this.import(!1)},Object(D["formatMessage"])({id:"cloud.table.import"})),q.a.createElement(d["a"],{onClick:this.deleteMany},Object(D["formatMessage"])({id:"animate.option.batch.some.delete"}))),q.a.createElement(d["a"],{type:"danger",onClick:this.deleteAll},Object(D["formatMessage"])({id:"animate.option.batch.all.delete"}))),q.a.createElement(l["a"],{span:8},q.a.createElement(A,{placeholder:Object(D["formatMessage"])({id:"common.search"}),onSearch:this.onSearch,enterButton:!0}))),q.a.createElement(c["a"],null,q.a.createElement(s["a"],{loading:y,rowKey:"_id",rowSelection:b,columns:h,onChange:this.onChangeTable,dataSource:p,pagination:M})),q.a.createElement(m["a"],{visible:n,footer:null,onCancel:this.hideModal,width:1200,destroyOnClose:!0,centered:!0},q.a.createElement(B["a"],{info:o})))}}]),t}(I["Component"]),n=i))||n);t["default"]=L}}]);