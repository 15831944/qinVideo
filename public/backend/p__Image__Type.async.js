(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"Yzj/":function(e,t,a){"use strict";a.r(t);a("g9YV");var n,i,o,c=a("wCAj"),s=(a("14J3"),a("BMrR")),r=(a("jCWc"),a("kPKH")),m=(a("DZo9"),a("8z0m")),l=a("jehZ"),d=a.n(l),g=(a("+L6B"),a("2/Rp")),p=(a("Telt"),a("Tckk")),u=(a("5NDa"),a("5rEg")),h=(a("2qtc"),a("kLXV")),f=a("2Taf"),y=a.n(f),w=a("vZ4D"),v=a.n(w),k=a("l4Ni"),b=a.n(k),j=a("ujKo"),M=a.n(j),O=a("MhPg"),E=a.n(O),S=a("q1tI"),I=a.n(S),L=a("MuoO"),C=a("LLXN"),R=a("Dlz4"),D=(n=Object(L["connect"])(function(e){var t=e.image,a=e.loading;return{image:t,loading:a.models.image}}),n((o=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return a=b()(this,(e=M()(t)).call.apply(e,[this].concat(i))),a.state={selectedRowKeys:[],imgView:!1,imgUrl:"",iconLoading:!1},a.imgView={show:function(e){return function(){a.setState({imgView:!0,imgUrl:e})}},hide:function(){a.setState({imgView:!1,imgUrl:null})}},a.initData=function(e){var t=a.props.dispatch;t({type:"image/queryImageList",payload:{params:{type:e}}})},a.removeImage=function(e){return function(){var t=[e];a.deleteBatch(t)}},a.removeImageList=function(){var e=a.state.selectedRowKeys;h["a"].confirm({title:Object(C["formatMessage"])({id:"image.delete"}),content:Object(C["formatMessage"])({id:"image.delete.batch.tips"}),okText:Object(C["formatMessage"])({id:"common.confirm"}),cancelText:Object(C["formatMessage"])({id:"common.cancel"}),onOk:function(){a.deleteBatch(e),a.setState({selectedRowKeys:[]})}})},a.deleteBatch=function(e){var t=a.props,n=t.dispatch,i=t.match.params.type;n({type:"image/deleteImage",payload:{data:{list:e}},addon:{type:i}})},a.onSearchImage=function(e){a.setState({name:e})},a.handleChange=function(e){if("uploading"!==e.file.status){if("done"===e.file.status){a.setState({iconLoading:!1});var t=a.props.match.params.type;a.initData(t)}}else a.setState({iconLoading:!0})},a}return E()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.type;this.initData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.type,a=this.props.match.params.type;t!==a&&this.initData(t)}},{key:"render",value:function(){var e=this,t=u["a"].Search,a=this.props,n=a.loading,i=a.image,o=a.match.params.type,l=this.state,f=l.selectedRowKeys,y=l.imgUrl,w=l.imgView,v=l.name,k=l.iconLoading,b=i[o].map(function(e){var t=e.split("/")[2]?e.split("/")[2].split(".")[0]:null,a=e.split("/")[2]?e.split("/")[2].split(".")[1]:null;return{cover:e,name:t,kind:a}}),j=b.filter(function(e){return new RegExp(v).test(e.name)}),M=[{title:Object(C["formatMessage"])({id:"image.cover"}),dataIndex:"cover",key:"cover",render:function(t){return I.a.createElement(p["a"],{src:t,icon:"cloud",shape:"square",size:40,onClick:e.imgView.show(t)})}},{title:Object(C["formatMessage"])({id:"image.name"}),dataIndex:"name",key:"name"},{title:Object(C["formatMessage"])({id:"image.kind"}),dataIndex:"kind",key:"kind"},{title:Object(C["formatMessage"])({id:"image.option"}),key:"action",dataIndex:"cover",render:function(t){return I.a.createElement("a",{onClick:e.removeImage(t)},Object(C["formatMessage"])({id:"image.delete"}))}}],O={selectedRowKeys:f,onChange:function(t){e.setState({selectedRowKeys:t})}},E={showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["5","10","15","20","50","100","200","500"],total:j.length||0,showTotal:function(e){return"".concat(Object(C["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(C["formatMessage"])({id:"common.all.item"}))}};return I.a.createElement("div",{className:"tableList"},I.a.createElement(s["a"],{className:"head"},I.a.createElement(r["a"],{span:16,style:{height:"30px"}},I.a.createElement(m["a"],d()({name:"file",showUploadList:!1,onChange:this.handleChange,data:{type:o}},R["a"]),I.a.createElement(g["a"],{icon:"plus",type:"primary",loading:k},Object(C["formatMessage"])({id:"image.upload"}))),f.length>0&&I.a.createElement(g["a"],{onClick:this.removeImageList},Object(C["formatMessage"])({id:"common.delete.batch"}))),I.a.createElement(r["a"],{span:8},I.a.createElement(t,{placeholder:Object(C["formatMessage"])({id:"image.search"}),onSearch:this.onSearchImage,enterButton:!0}))),I.a.createElement(c["a"],{loading:n,columns:M,rowSelection:O,dataSource:j,rowKey:"cover",pagination:E}),I.a.createElement(h["a"],{visible:w,footer:null,onCancel:this.imgView.hide,centered:!0},I.a.createElement("img",{alt:Object(C["formatMessage"])({id:"common.image"}),style:{width:"100%"},src:y})))}}]),t}(S["Component"]),i=o))||i);t["default"]=D}}]);