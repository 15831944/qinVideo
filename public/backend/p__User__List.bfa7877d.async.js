(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{CNVm:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,s,n,l=a("bx4M"),o=(a("g9YV"),a("wCAj")),c=(a("14J3"),a("BMrR")),i=(a("jCWc"),a("kPKH")),u=(a("qVdP"),a("jsC+")),d=(a("Pwec"),a("CtXQ")),m=(a("+L6B"),a("2/Rp")),p=(a("lUTK"),a("BvKs")),f=(a("/zsF"),a("PArb")),h=(a("Awhp"),a("KrTs")),b=(a("+BJd"),a("mr32")),g=(a("Telt"),a("Tckk")),E=(a("2qtc"),a("kLXV")),y=a("2Taf"),v=a.n(y),O=a("vZ4D"),M=a.n(O),j=a("l4Ni"),k=a.n(j),q=a("ujKo"),w=a.n(q),x=a("rlhR"),I=a.n(x),C=a("MhPg"),S=a.n(C),D=(a("5NDa"),a("5rEg")),R=a("q1tI"),K=a.n(R),U=a("MuoO"),T=a("7DNP"),z=a("LLXN"),B=a("wd/R"),V=a.n(B),N=(a("y8nQ"),a("Vl3Y")),P=a("jehZ"),A=a.n(P),F=(a("giR+"),a("fyUT")),Y=(a("OaEy"),a("2fM7")),J=a("p0pE"),L=a.n(J),X=a("zX7x"),H=function(e){function t(){var e,a;v()(this,t);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return a=k()(this,(e=w()(t)).call.apply(e,[this].concat(s))),a.state={},a.handleSubmit=function(e){return function(){var t=a.props,r=t.modal,s=t.form;s.validateFields(function(t,a){t||(r.confirm(L()({},a,{nameData:e})),s.resetFields())})}},a.handleCancel=function(){var e=a.props,t=e.modal,r=e.form;t.cancel(),r.resetFields()},a}return S()(t,e),M()(t,[{key:"render",value:function(){var e=Y["a"].Option,t=this.props.form.getFieldDecorator,a=this.props,r=a.show,s=a.data,n=a.modal,l={labelCol:{span:4},wrapperCol:{span:18}},o=s||{},c=o.name,i=o.status,u=o.email,d=o.level,m=o.score,p=o.avatar;return K.a.createElement(E["a"],{title:"\u5feb\u901f\u7f16\u8f91",visible:r,maskClosable:!1,forceRender:"true",onOk:this.handleSubmit(c),onCancel:this.handleCancel},K.a.createElement(N["a"],{onSubmit:n.submit},K.a.createElement(N["a"].Item,A()({},l,{label:"\u7b49\u7ea7"}),t("level",{initialValue:d})(K.a.createElement(F["a"],null))),K.a.createElement(N["a"].Item,A()({},l,{label:"\u79ef\u5206"}),t("score",{initialValue:m})(K.a.createElement(F["a"],null))),K.a.createElement(N["a"].Item,A()({},l,{label:"\u5934\u50cf"}),t("avatar",{initialValue:p})(K.a.createElement(X["a"],{width:120,height:120}))),s&&K.a.createElement(N["a"].Item,A()({},l,{label:"\u540d\u5b57"}),t("name",{initialValue:c,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u540d\u5b57"}]})(K.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57"}))),s&&K.a.createElement(N["a"].Item,A()({},l,{label:"\u90ae\u7bb1"}),t("email",{initialValue:u,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u90ae\u7bb1"}]})(K.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),K.a.createElement(N["a"].Item,A()({},l,{label:"\u72b6\u6001"}),t("status",{initialValue:i||"inactive",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u72b6\u6001"}]})(K.a.createElement(Y["a"],{placeholder:"\u8bf7\u9009\u62e9\u89c6\u9891\u72b6\u6001"},K.a.createElement(e,{value:"inactive"},"\u5f85\u9a8c\u8bc1"),K.a.createElement(e,{value:"active"},"\u5df2\u6fc0\u6d3b"),K.a.createElement(e,{value:"unused"},"\u5f85\u5220\u9664"))))))}}]),t}(R["PureComponent"]),Q=N["a"].create()(H),Z=D["a"].Search,W=(r=Object(U["connect"])(function(e){var t=e.user,a=e.loading;return{user:t,loading:a.models.user}}),r((n=function(e){function t(e){var a;v()(this,t),a=k()(this,w()(t).call(this,e)),a.list={quickEdit:function(e){return function(){a.setState({quickEditData:{name:e.name,email:e.email,status:e.status,level:e.level,score:e.score,avatar:e.avatar}}),a.modal.show()}},fullEdit:function(e){return function(){var t=a.props.dispatch;t(T["routerRedux"].push("/user/slug/".concat(e)))}},fulldelete:function(e){return function(){var t=a.props.dispatch;t({type:"user/deleteUser",payload:{params:{slug:e}}})}}},a.table={addNew:function(){var e=a.props.dispatch;e(T["routerRedux"].push("/user/create"))},batchEdit:function(){a.setState({quickEditStatus:!0})},batchDelete:function(){E["a"].confirm({title:Object(z["formatMessage"])({id:"user.list.delete.user"}),content:Object(z["formatMessage"])({id:"user.list.delete.user.tips"}),okText:Object(z["formatMessage"])({id:"common.confirm"}),cancelText:Object(z["formatMessage"])({id:"common.cancel"}),onOk:function(){a.deleteBatch(!1),a.setState({selectedRowKeys:[]})}})},moreOption:function(e){switch(e.key){case"edit":a.table.allEdit();break;case"delete":a.table.allDelete();break;default:break}},allEdit:function(){a.setState({quickEditStatus:!0})},allDelete:function(){E["a"].confirm({title:Object(z["formatMessage"])({id:"user.list.delete.user"}),content:Object(z["formatMessage"])({id:"user.list.delete.user.all.tips"}),okText:Object(z["formatMessage"])({id:"common.confirm"}),cancelText:Object(z["formatMessage"])({id:"common.cancel"}),onOk:function(){a.deleteBatch(!0),a.setState({selectedRowKeys:[]})}})}},a.modal={show:function(){a.setState({quickEditStatus:!0})},cancel:function(){a.setState({quickEditStatus:!1,quickEditData:null})},confirm:function(e){var t=e.name,r=e.status,s=e.email,n=e.level,l=e.score,o=e.avatar,c=e.nameData,i=a.props.dispatch,u=a.state.selectedRowKeys;a.modal.cancel(),t?i({type:"user/putUserInfo",payload:{params:{slug:c},data:{status:r,name:t,email:s,level:n,score:l,avatar:o}}}):u.length>0?(i({type:"user/putUserBatch",payload:{data:{type:"batch",list:u,data:{status:r,level:n,score:l,avatar:o}}},addon:a.query}),a.setState({selectedRowKeys:[]})):i({type:"user/putUserBatch",payload:{data:{type:"all",data:{status:r,avatar:o,level:n,score:l}}},addon:a.query})}},a.deleteBatch=function(e){var t=a.props.dispatch,r=a.state.selectedRowKeys;t(e?{type:"user/deleteUserBatch",payload:{data:{type:"all"}},addon:a.query}:{type:"user/deleteUserBatch",payload:{data:{type:"batch",list:r}},addon:a.query})},a.onSearchUser=function(e){a.query.name=e,a.query.page=1,a.queryUser()},a.onChangeTable=function(e,t,r){var s=e.current,n=e.pageSize,l=t.status?t.status[0]:null,o=null;if(r.order){var c="descend"===r.order?"-":"",i=r.field;o="".concat(c).concat(i)}a.query={size:n,page:s,sort:o,status:l},a.queryUser()},a.queryUser=function(){var e=I()(a),t=e.query,r=a.props.dispatch;r({type:"user/queryUser",payload:{query:t}});var s=a.props,n=s.location.pathname,l=s.history;l.push({pathname:n,state:a.query})};var r=e.location.state,s=void 0===r?{}:r;return a.state={selectedRowKeys:[],quickEditStatus:!1,quickEditData:null},a.query={name:s.name,size:s.size?parseInt(s.size):10,page:s.page?parseInt(s.page):1,sort:s.sort,email:s.email,status:s.status},a}return S()(t,e),M()(t,[{key:"componentDidMount",value:function(){this.queryUser()}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=t.quickEditStatus,s=t.quickEditData,n=this.props,E=n.user,y=E.list,v=E.total,O=n.loading,M={inactive:{text:Object(z["formatMessage"])({id:"user.inactive"}),badge:"processing",value:"inactive"},active:{text:Object(z["formatMessage"])({id:"user.active"}),badge:"success",value:"active"},unused:{text:Object(z["formatMessage"])({id:"user.unused"}),badge:"error",value:"unused"}},j=[{title:Object(z["formatMessage"])({id:"user.avatar"}),dataIndex:"avatar",render:function(e){return K.a.createElement(g["a"],{size:64,shape:"square",icon:"user",src:e})}},{title:Object(z["formatMessage"])({id:"user.name"}),dataIndex:"name",key:"name",sorter:!0,render:function(t,a){return K.a.createElement("span",null,K.a.createElement("a",{onClick:e.list.fullEdit(a.name)},t))}},{title:Object(z["formatMessage"])({id:"user.email"}),dataIndex:"email",sorter:!0},{title:Object(z["formatMessage"])({id:"user.level"}),dataIndex:"level",sorter:!0,render:function(e){var t;return t=0===e?null:e<11?"#2db7f5":e<21?"#87d068":e<31?"#108ee9":e<41?"#33cc33":e<51?"#9966ff":e<61?"#993399":e<71?"#ff9966":e<81?"#669999":e<91?"#00cc44":e<100?"#9900cc":"#f50",K.a.createElement(b["a"],{color:t},e)}},{title:Object(z["formatMessage"])({id:"user.score"}),dataIndex:"score",sorter:!0},{title:Object(z["formatMessage"])({id:"user.money"}),dataIndex:"money",sorter:!0},{title:Object(z["formatMessage"])({id:"user.expired"}),dataIndex:"expired",sorter:!0,render:function(e){return"".concat((e/3600/24).toFixed(2),"\u5929")}},{title:Object(z["formatMessage"])({id:"user.count.post"}),dataIndex:"count.post",sorter:!0},{title:Object(z["formatMessage"])({id:"user.count.animate"}),dataIndex:"count.animate",sorter:!0},{title:Object(z["formatMessage"])({id:"user.count.comic"}),dataIndex:"count.comic",sorter:!0},{title:Object(z["formatMessage"])({id:"user.count.comment"}),dataIndex:"count.comment",sorter:!0},{title:Object(z["formatMessage"])({id:"user.count.report"}),dataIndex:"count.report",sorter:!0},{title:Object(z["formatMessage"])({id:"user.count.order"}),dataIndex:"count.order",sorter:!0},{title:Object(z["formatMessage"])({id:"user.status"}),dataIndex:"status",filters:Object.values(M),filterMultiple:!1,render:function(e){return K.a.createElement(h["a"],{status:M[e].badge,text:M[e].text})}},{title:Object(z["formatMessage"])({id:"user.createdAt"}),dataIndex:"createdAt",sorter:!0,width:120,align:"center",render:function(e){return V()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:Object(z["formatMessage"])({id:"user.option"}),key:"action",dataIndex:"name",render:function(t,a){return K.a.createElement("span",null,K.a.createElement("a",{onClick:e.list.quickEdit(a)},Object(z["formatMessage"])({id:"user.option.quick.edit"})),K.a.createElement(f["a"],{type:"vertical"}),K.a.createElement("a",{onClick:e.list.fullEdit(t)},Object(z["formatMessage"])({id:"user.option.full.edit"})),K.a.createElement(f["a"],{type:"vertical"}),K.a.createElement("a",{onClick:e.list.fulldelete(t)},Object(z["formatMessage"])({id:"user.option.full.delete"})))}}],k=K.a.createElement(p["b"],{onClick:this.table.moreOption},K.a.createElement(p["b"].Item,{key:"edit"},Object(z["formatMessage"])({id:"user.option.batch.all.edit"})),K.a.createElement(p["b"].Item,{key:"delete"},Object(z["formatMessage"])({id:"user.option.batch.all.delete"}))),q={selectedRowKeys:a,onChange:function(t){e.setState({selectedRowKeys:t})}},w={showSizeChanger:!0,showQuickJumper:!0,total:v,defaultCurrent:this.query.page,defaultPageSize:this.query.size,showTotal:function(e){return"".concat(Object(z["formatMessage"])({id:"common.all.total"})," ").concat(e," ").concat(Object(z["formatMessage"])({id:"common.all.item"}))}};return K.a.createElement(l["a"],{className:"tableList",bordered:!1},K.a.createElement(c["a"],{className:"head"},K.a.createElement(i["a"],{span:16},K.a.createElement(m["a"],{icon:"plus",type:"primary",onClick:this.table.addNew},Object(z["formatMessage"])({id:"common.add.new"})),a.length>0&&K.a.createElement("span",null,K.a.createElement(m["a"],{onClick:this.table.batchEdit},Object(z["formatMessage"])({id:"user.option.batch.some.edit"})),K.a.createElement(m["a"],{onClick:this.table.batchDelete},Object(z["formatMessage"])({id:"user.option.batch.some.delete"}))),K.a.createElement(u["a"],{overlay:k},K.a.createElement(m["a"],null,Object(z["formatMessage"])({id:"common.more.option"})," ",K.a.createElement(d["a"],{type:"down"})))),K.a.createElement(i["a"],{span:8},K.a.createElement(Z,{placeholder:Object(z["formatMessage"])({id:"user.search"}),onSearch:this.onSearchUser,enterButton:!0}))),K.a.createElement(c["a"],null,K.a.createElement(o["a"],{className:"longTable",loading:O,rowKey:"name",rowSelection:q,columns:j,onChange:this.onChangeTable,dataSource:y,pagination:w})),K.a.createElement(Q,{show:r,data:s,modal:this.modal}))}}]),t}(R["Component"]),s=n))||s);t["default"]=W}}]);