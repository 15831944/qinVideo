(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{wjB5:function(e,t,n){"use strict";n.r(t);n("T2oS");var a=n("W9HT"),i=(n("miYZ"),n("tsqr")),c=n("mrSG"),o=n("q1tI"),r=n.n(o),s=n("MuoO"),l=(n("R9oj"),n("ECub")),m=n("fFZ8"),d=n.n(m),p=(n("Znn+"),n("ZTPi")),g=n("vOnD"),u=n("Gwa3"),h=n("LLXN"),b=n("S+Af"),f=n("DNCa"),x=n("xEAY"),E=n("YO1i"),v=n("3a4m"),w=n.n(v),y=n("qHAN"),N=n("qki9");function k(){var e=d()(["\n  .comic {\n    margin-top: 40px;\n    z-index: 999;\n    background-color: rgba(0, 0, 0, 0.1);\n  }\n\n  .eposide {\n    border-top: solid 6px #ebebeb;\n  }\n\n  .info {\n    border-top: solid 6px #ebebeb;\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    padding: 15px;\n\n    .cover {\n      width: 90px;\n      height: 120px;\n      border-radius: 5px;\n      background-color: rgba(0, 0, 0, 0.05);\n      box-shadow: 0 3px 14px 0 hsla(22, 4%, 52%, 0.4);\n      background-size: cover;\n      background-position: center;\n      cursor: pointer;\n    }\n\n    .main {\n      width: calc(100% - 105px);\n      height: 120px;\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      align-items: flex-start;\n\n      .title {\n        height: 30px;\n        line-height: 30px;\n        font-weight: bold;\n        width: 100%;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: keep-all;\n      }\n      .count {\n        display: flex;\n        justify-content: flex-start;\n        align-items: center;\n        height: 1.5rem;\n\n        span.icon {\n          margin-right: 20px;\n          line-height: 1.1em;\n          i {\n            margin-right: 5px;\n          }\n        }\n      }\n      .introduce {\n        color: #515a6e;\n        height: 4rem;\n        font-size: 12px;\n        line-height: 1rem;\n        overflow: hidden;\n      }\n    }\n  }\n\n  .comment {\n    border-top: solid 6px #ebebeb;\n    padding: 0 15px;\n  }\n"]);return k=function(){return e},e}var j=p["a"].TabPane,O=g["a"].div(k()),C=e=>{var t=e.info,n=Object(o["useContext"])(u["a"]),a=Object(o["useMemo"])(()=>n,[n]);return r.a.createElement(O,{color:a},r.a.createElement("div",{className:"comic"},t.link.map((e,t)=>r.a.createElement("div",{className:"img"},r.a.createElement("span",null,Object(x["b"])(t)),r.a.createElement("img",{src:e,alt:"comic"}))),0===t.link.length&&r.a.createElement(l["a"],{style:{padding:"30px"}})),r.a.createElement("div",{className:"eposide"},r.a.createElement(b["a"],{target:t._id,eposides:t.eposides})),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"cover",style:{backgroundImage:"url(".concat(t.target&&t.target.coverVertical,")")},onClick:()=>{w.a.push("/comic/".concat(t.target&&t.target.slug))}}),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"title"},t.title),r.a.createElement("div",{className:"count"},r.a.createElement("span",{className:"icon"},r.a.createElement(E["a"],{type:"icon-youtube"}),t.countPlay),r.a.createElement("span",{className:"icon"},r.a.createElement(E["a"],{type:"icon-comment1"}),t.countComment),r.a.createElement("span",{className:"icon"},r.a.createElement(N["a"],null,r.a.createElement(y["a"],{type:"Comic",target:t._id,onModel:"Eposide"},r.a.createElement(E["a"],{type:"icon-icon_report_fill"}),Object(h["formatMessage"])({id:"report.question"}))))),r.a.createElement("div",{className:"introduce"},t.target&&t.target.introduce&&t.target.introduce.slice(0,120)))),r.a.createElement("div",{className:"comment"},r.a.createElement(p["a"],{defaultActiveKey:"1"},r.a.createElement(j,{tab:"".concat(Object(h["formatMessage"])({id:"animate.tabs.comment"}),"(").concat(t.countComment||0,")"),key:"1"},r.a.createElement(f["a"],{target:t._id,onModel:"Eposide",mobile:!0})))))},D=C,M=class extends o["Component"]{constructor(e){super(e),this.initData=(()=>{var e=this.state.id,t=this.props.dispatch;null!==e?t({type:"comic/getPlayInfo",payload:{params:{id:e}}}).then(e=>{e&&e.data&&this.setState({info:e.data})}):i["a"].error(Object(h["formatMessage"])({id:"error.id.few"}))}),this.state={id:e.match.params.id,info:{link:[],eposides:[],target:{}}}}static getDerivedStateFromProps(e,t){return e.match.params.id!==t.id?{id:e.match.params.id}:null}componentDidMount(){this.initData()}componentDidUpdate(e,t){t.id!==this.state.id&&this.initData()}render(){var e=this.props.loading,t=this.state.info;return r.a.createElement(a["a"],{spinning:e},r.a.createElement(D,{info:t}))}};M=Object(c["a"])([Object(s["connect"])(e=>{var t=e.comic,n=e.loading;return{comic:t,loading:n.effects["comic/getPlayInfo"]}})],M);t["default"]=M}}]);