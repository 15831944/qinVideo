(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{IIFU:function(e,n,t){"use strict";t.r(n);t("T2oS");var a=t("W9HT"),i=t("d6i3"),o=t.n(i),r=t("1l/V"),s=t.n(r),c=t("mrSG"),l=t("q1tI"),m=t.n(l),d=t("MuoO"),p=(t("pC0b"),t("GzdX")),u=t("fFZ8"),f=t.n(u),g=(t("Znn+"),t("ZTPi")),b=t("vOnD"),h=t("LLXN"),x=t("wd/R"),v=t.n(x),y=t("TSYQ"),E=t.n(y),w=t("YO1i"),k=t("Gwa3"),j=t("yDSA"),O=t("DNCa"),C=t("7rZP"),M=t("l61h"),N=(t("+L6B"),t("2/Rp")),S=(t("2qtc"),t("kLXV")),z=(t("miYZ"),t("tsqr")),D=t("qIgq"),A=t.n(D),L=(t("5NDa"),t("5rEg")),T=t("zz3R");function I(){var e=f()(["\n  display: inline-block;\n\n  .footer-con {\n    display: flex;\n    justify-content: center;\n    padding-bottom: 15px;\n  }\n\n  .ant-modal-footer {\n    border-top: none;\n  }\n\n  .ant-modal-title {\n    text-align: center;\n  }\n  .rateCount {\n    .rateCountShow {\n      display: block;\n    }\n    .rateCountHide {\n      display: none;\n    }\n    &:hover {\n      .rateCountShow {\n        display: none;\n      }\n      .rateCountHide {\n        display: block;\n      }\n    }\n  }\n  .con {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n"]);return I=function(){return e},e}var R=L["a"].TextArea,Y=b["a"].div(I()),P=e=>{e.children;var n=e.target,t=e.onModel,a=e.rate,i=e.submit,r=e.type,c=Object(l["useState"])(!1),d=A()(c,2),u=d[0],f=d[1],g=Object(l["useState"])(!1),b=A()(g,2),x=b[0],v=b[1],y=Object(l["useState"])(0),E=A()(y,2),k=E[0],j=E[1],O=Object(l["useState"])(""),C=A()(O,2),M=C[0],D=C[1],L=()=>{f(!0)},I=()=>{f(!1),j(0),D(""),v(!1)},P=function(){var e=s()(o.a.mark(function e(){var a;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return v(!0),e.next=3,T["a"].postRate({data:{content:M,onModel:t,target:n,rate:2*k}});case 3:a=e.sent,a&&(z["a"].success(Object(h["formatMessage"])({id:"common.submit.success"})),j(0),f(!1),D(""),i&&i()),v(!1);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return m.a.createElement(Y,null,m.a.createElement("div",{className:"rateCount",onClick:L},"mobile"===r?m.a.createElement(w["a"],{type:"icon-bianxie"}):m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"rateCountShow"},a,Object(h["formatMessage"])({id:"animate.info.rate.count"})),m.a.createElement("span",{className:"rateCountHide"},m.a.createElement(w["a"],{type:"icon-bianxie"}),m.a.createElement("span",{style:{marginLeft:"5px"}},Object(h["formatMessage"])({id:"animate.info.rate.count.send"}))))),m.a.createElement(S["a"],{visible:u,getContainer:!1,title:Object(h["formatMessage"])({id:"common.rate"}),onCancel:I,footer:m.a.createElement("div",{className:"footer-con"},m.a.createElement(N["a"],{key:"back",onClick:I,style:{marginRight:"15px",padding:"5px 45px",height:"40px"}},Object(h["formatMessage"])({id:"common.cancel"})),m.a.createElement(N["a"],{key:"submit",type:"primary",loading:x,onClick:P,style:{marginLeft:"15px",padding:"5px 45px",height:"40px"}},Object(h["formatMessage"])({id:"common.submit"})))},m.a.createElement("div",{className:"con"},m.a.createElement(p["a"],{value:k,onChange:e=>j(e)}),m.a.createElement(R,{rows:4,value:M,onChange:e=>D(e.target.value),placeholder:Object(h["formatMessage"])({id:"common.rate.tips"}),style:{marginTop:"30px"}}))))},V=P;function _(){var e=f()(["\n  .head {\n    width: 100%;\n    height: 160px;\n    position: relative;\n    padding: 55px 15px 15px 15px;\n    margin-bottom: 25px;\n\n    .bg-cover {\n      width: 100%;\n      height: 160px;\n      left: 0;\n      top: 0;\n      position: absolute;\n      overflow: hidden;\n\n      .bg {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        left: 0;\n        top: 0;\n        filter: blur(15px);\n        transform: scale(1.2);\n        background-size: cover;\n        background-position: center;\n        z-index: -1;\n\n        &:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n        }\n      }\n    }\n\n    .info {\n      height: 120px;\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n\n      .cover {\n        background-size: cover;\n        border: 3px solid #fff;\n        border-radius: 5px;\n        background-position: center;\n        width: 90px;\n        height: 120px;\n        box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);\n      }\n\n      .main {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        height: 95px;\n        width: calc(100% - 105px);\n\n        .left {\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n          align-items: flex-start;\n          color: white;\n          height: 100%;\n\n          span:nth-child(1) {\n            font-size: 16px;\n            font-weight: bold;\n          }\n\n          span:nth-child(2),\n          span:nth-child(3) {\n            font-size: 13px;\n          }\n        }\n\n        .star {\n          display: flex;\n          flex-direction: column;\n          justify-content: space-around;\n          align-items: center;\n          color: white;\n          font-size: 12px;\n          height: 100%;\n\n          .rate {\n            color: #ffa726;\n            font-size: 24px;\n          }\n\n          .rateCount {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n          }\n        }\n      }\n    }\n  }\n\n  .information {\n    padding: 0 15px;\n\n    .introduce {\n      font-weight: 200;\n      font-size: 13px;\n      overflow: hidden;\n      line-height: 20px;\n      margin-bottom: 10px;\n      text-align: justify;\n    }\n\n    .button {\n      width: 100%;\n      display: flex;\n      justify-content: flex-start;\n      align-items: flex-end;\n\n      section {\n        width: calc((100% - 30px) / 2);\n      }\n\n      div {\n        min-width: calc((100% - 30px) / 2);\n        height: 46px;\n        padding: 0 25px;\n        color: #fff;\n        font-size: 1.1rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        font-weight: 300;\n        border-radius: 5px;\n\n        &:hover {\n          opacity: 0.8;\n        }\n\n        i {\n          font-size: 1.5em;\n          margin-right: 10px;\n        }\n      }\n\n      .like {\n        background-color: #f36392;\n\n        &.active i {\n          color: #ffa726;\n        }\n      }\n\n      .download {\n        margin-left: 30px;\n        background-color: rgb(24, 144, 255);\n      }\n    }\n  }\n\n  .content.container {\n    margin: 15px 0;\n    border-top: solid 6px #ebebeb;\n\n    .sec {\n      display: none;\n\n      &.active {\n        display: block;\n      }\n    }\n  }\n"]);return _=function(){return e},e}var q=g["a"].TabPane,H=b["a"].div(_()),U=e=>{window.open(e)},Z=e=>{var n=e.info,t=e.userAction,a=Object(l["useContext"])(k["a"]),i=Object(l["useMemo"])(()=>a,[a]);return m.a.createElement(H,{color:i},m.a.createElement("div",{className:"head"},m.a.createElement("div",{className:"bg-cover"},m.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(n.coverVertical,")")}})),m.a.createElement("div",{className:"info"},m.a.createElement("div",{className:"cover",style:{backgroundImage:"url(".concat(n.coverVertical,")")}}),m.a.createElement("div",{className:"main"},m.a.createElement("div",{className:"left"},m.a.createElement("span",null,n.title),m.a.createElement("span",null,n.countEposide," ",Object(h["formatMessage"])({id:"animate.info.eposideCount"})," ",Object(h["formatMessage"])({id:n.isUpdate?"animate.info.isUpdate.true":"animate.info.isUpdate.false"})),m.a.createElement("span",null,v()(n.firstPlay).format("YYYY-MM-DD")," ",Object(h["formatMessage"])({id:"animate.info.firstPlay"}))),m.a.createElement("div",{className:"star"},m.a.createElement("span",{className:"rate"},n.countStar),m.a.createElement(p["a"],{disabled:!0,allowHalf:!0,defaultValue:n.countStar/2,style:{fontSize:"10px"}}),m.a.createElement("span",{className:"rateCount"},n.countRate,Object(h["formatMessage"])({id:"animate.info.rate.count"}),m.a.createElement("span",{style:{marginLeft:"5px"}},m.a.createElement(M["a"],null,m.a.createElement(V,{target:n._id,onModel:"Animate",type:"mobile"})))))))),m.a.createElement("div",{className:"information"},m.a.createElement("div",{className:"introduce"},m.a.createElement("span",null,n.introduce)),m.a.createElement("div",{className:"button"},m.a.createElement(M["a"],null,m.a.createElement("div",{className:E()("like",{active:n.isLiked}),onClick:t},m.a.createElement(w["a"],{type:"icon-yizhuifan"}),m.a.createElement("span",null,Object(h["formatMessage"])({id:"animate.info.btn.like"})))),n.downTitle&&m.a.createElement("div",{className:"download",onClick:()=>{U(n.downLink)}},m.a.createElement(w["a"],{type:"icon-ic_cloud_download_"}),m.a.createElement("span",null,n.downTitle)))),m.a.createElement("div",{className:"content container"},m.a.createElement(g["a"],{defaultActiveKey:"1"},m.a.createElement(q,{tab:Object(h["formatMessage"])({id:"animate.tabs.eposide"}),key:"1"},m.a.createElement(j["b"],{season:n.seasons,eposide:n.eposides,slug:n.slug,cover:n.coverVertical})),m.a.createElement(q,{tab:"".concat(Object(h["formatMessage"])({id:"animate.tabs.comment"}),"(").concat(n.countComment||0,")"),key:"2"},m.a.createElement(O["a"],{target:n._id,onModel:"Animate",mobile:!0})),m.a.createElement(q,{tab:Object(h["formatMessage"])({id:"animate.tabs.relative"}),key:"3"},m.a.createElement(C["a"],{type:"animate",target:n.id})))))},F=Z,G=class extends l["Component"]{constructor(e){var n;super(e),n=this,this.initData=s()(o.a.mark(function e(){var t,a,i;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.state.slug,a=n.props.dispatch,e.next=4,a({type:"animate/getInfo",payload:{params:{slug:t}}});case 4:i=e.sent,i&&n.setState({info:i.data});case 6:case"end":return e.stop()}},e)})),this.userAction=(()=>{var e=this.state.info;T["a"].userAction({data:{type:"Animate",target:e._id}}).then(n=>{n&&(e.isLiked=!e.isLiked,this.setState({info:e}))})}),this.state={slug:e.match.params.slug,info:{area:[],kind:[],year:[],tag:[],countRate:0,countStar:0,author:[],seasons:[],eposides:[]}}}static getDerivedStateFromProps(e,n){return e.match.params.slug!==n.slug?{slug:e.match.params.slug}:null}componentDidMount(){this.initData()}componentDidUpdate(e,n){n.slug!==this.state.slug&&this.initData()}render(){var e=this.props.loading,n=this.state.info;return m.a.createElement(a["a"],{spinning:e},m.a.createElement(F,{info:n,userAction:this.userAction}))}};G=Object(c["a"])([Object(d["connect"])(e=>{var n=e.user,t=e.animate,a=e.loading;return{user:n,animate:t,loading:a.effects["animate/getInfo"]}})],G);n["default"]=G}}]);